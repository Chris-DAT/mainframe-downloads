<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index,follow">
    <title>src/js/sources/ibm/common/modules/masthead-search.js - IBM v18 (Northstar) common Javascript documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" href="http://www.ibm.com/favicon.ico">
    <script>
        digitalData = {
            page: {
                pageInfo: {
                    effectiveDate: '2017-02-25',
                    expiryDate: '2020-02-25',
                    language: 'en-US',
                    publishDate: '2017-02-25',
                    publisher: 'IBM Corporation',
                    ibm: {
                        contentDelivery: 'yuidoc via grunt',
                        contentProducer: 'Michael Santelia',
                        country: 'US',
                        owner: 'Michael Santelia'
                    }
                }
            }
        };
    </script>

    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>

    <script>

		var lastUpdate = new Date(document.lastModified),
			updatedMonth = lastUpdate.getMonth(),
			updatedDate = lastUpdate.getDate(),
			updatedYear = lastUpdate.getFullYear(),
			today = new Date(),
			todayMonth = today.getMonth(),
			todayDate = today.getDate(),
			todayYear = today.getFullYear(),
			monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"],
			lastUpdatedText = "",
			daysAgo = Math.floor((today - lastUpdate) / (1000*60*60*24));

		updatedMonthName = monthNames[updatedMonth];

		switch (daysAgo) {

			case 1: 
				lastUpdatedText = "Updated yesterday";
				break;
				
			case 0: 
				lastUpdatedText = "Updated today";
				break;
				
			default: 
				lastUpdatedText = "Updated " + daysAgo + " days ago";
				break;
		}

		if (daysAgo > 4) {
			lastUpdatedText = "Updated: " + updatedMonthName + " " + updatedDate + ", " + updatedYear;
		}

    </script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-1-2">
            <div style="background: url(http://1.www.s81c.com/i/v17/t/ibm-logo.png) no-repeat scroll 0px 0px transparent; width: 105px; height: 45px; margin: 0.85em 0px;text-indent:-9999px;">IBM v18 (Northstar) common Javascript documentation</div>
        </div>
        <div class="yui3-u-1-2 version">
            <em>Javascript documentation for: IBM v18 (Northstar)<br />
            	<span style="font-size: 0.6em; position: absolute; right: 35px;"><script>document.writeln(lastUpdatedText)</script></span></em>
        </div>
    </div>
    
    <p><a href="../assets../../v18-js-source-documentation.zip" style="margin-left: 10px; padding-left: 15px; background: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_transactional_blue_ON.png) no-repeat 0 -202px;">Download a copy of this documentation (ZIP).</a></p>
    
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4" style="float: left;width:25%;">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/IBMCore.common.module.backtotop.html">IBMCore.common.module.backtotop</a></li>
                                <li><a href="../classes/IBMCore.common.module.canadanotice.html">IBMCore.common.module.canadanotice</a></li>
                                <li><a href="../classes/IBMCore.common.module.contactmodule.html">IBMCore.common.module.contactmodule</a></li>
                                <li><a href="../classes/IBMCore.common.module.footer.html">IBMCore.common.module.footer</a></li>
                                <li><a href="../classes/IBMCore.common.module.footermenu.html">IBMCore.common.module.footermenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.leftnav.html">IBMCore.common.module.leftnav</a></li>
                                <li><a href="../classes/IBMCore.common.module.liveperson.html">IBMCore.common.module.liveperson</a></li>
                                <li><a href="../classes/IBMCore.common.module.localeselector.html">IBMCore.common.module.localeselector</a></li>
                                <li><a href="../classes/IBMCore.common.module.localpagenotification.html">IBMCore.common.module.localpagenotification</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.html">IBMCore.common.module.masthead</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.sticky.html">IBMCore.common.module.masthead.sticky</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadbanner.html">IBMCore.common.module.mastheadbanner</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadsearch.html">IBMCore.common.module.mastheadsearch</a></li>
                                <li><a href="../classes/IBMCore.common.module.merchandising.html">IBMCore.common.module.merchandising</a></li>
                                <li><a href="../classes/IBMCore.common.module.mobilemenu.html">IBMCore.common.module.mobilemenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethiscontent.html">IBMCore.common.module.sharethiscontent</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethispage.html">IBMCore.common.module.sharethispage</a></li>
                                <li><a href="../classes/IBMCore.common.module.sitenavmenu.html">IBMCore.common.module.sitenavmenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.urx.html">IBMCore.common.module.urx</a></li>
                                <li><a href="../classes/IBMCore.common.translations.html">IBMCore.common.translations</a></li>
                                <li><a href="../classes/IBMCore.common.util.a11y.html">IBMCore.common.util.a11y</a></li>
                                <li><a href="../classes/IBMCore.common.util.addCssRule.html">IBMCore.common.util.addCssRule</a></li>
                                <li><a href="../classes/IBMCore.common.util.anchorlinkAdjustment.html">IBMCore.common.util.anchorlinkAdjustment</a></li>
                                <li><a href="../classes/IBMCore.common.util.bitly.html">IBMCore.common.util.bitly</a></li>
                                <li><a href="../classes/IBMCore.common.util.color.html">IBMCore.common.util.color</a></li>
                                <li><a href="../classes/IBMCore.common.util.config.html">IBMCore.common.util.config</a></li>
                                <li><a href="../classes/IBMCore.common.util.convertSecondsToHMS.html">IBMCore.common.util.convertSecondsToHMS</a></li>
                                <li><a href="../classes/IBMCore.common.util.cookie.html">IBMCore.common.util.cookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.coreservices.html">IBMCore.common.util.coreservices</a></li>
                                <li><a href="../classes/IBMCore.common.util.data.html">IBMCore.common.util.data</a></li>
                                <li><a href="../classes/IBMCore.common.util.debug.html">IBMCore.common.util.debug</a></li>
                                <li><a href="../classes/IBMCore.common.util.eventCoordinator.html">IBMCore.common.util.eventCoordinator</a></li>
                                <li><a href="../classes/IBMCore.common.util.freezeScrollbars.html">IBMCore.common.util.freezeScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.gatekeeper.html">IBMCore.common.util.gatekeeper</a></li>
                                <li><a href="../classes/IBMCore.common.util.generateId.html">IBMCore.common.util.generateId</a></li>
                                <li><a href="../classes/IBMCore.common.util.getCurrentGridSize.html">IBMCore.common.util.getCurrentGridSize</a></li>
                                <li><a href="../classes/IBMCore.common.util.getDataAttributes.html">IBMCore.common.util.getDataAttributes</a></li>
                                <li><a href="../classes/IBMCore.common.util.getScrollbarWidth.html">IBMCore.common.util.getScrollbarWidth</a></li>
                                <li><a href="../classes/IBMCore.common.util.has12grid.html">IBMCore.common.util.has12grid</a></li>
                                <li><a href="../classes/IBMCore.common.util.hasScrollbars.html">IBMCore.common.util.hasScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.meta.html">IBMCore.common.util.meta</a></li>
                                <li><a href="../classes/IBMCore.common.util.perf.html">IBMCore.common.util.perf</a></li>
                                <li><a href="../classes/IBMCore.common.util.queue.html">IBMCore.common.util.queue</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolledintoview.html">IBMCore.common.util.scrolledintoview</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolltracker.html">IBMCore.common.util.scrolltracker</a></li>
                                <li><a href="../classes/IBMCore.common.util.setIpcCookie.html">IBMCore.common.util.setIpcCookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.statshelper.html">IBMCore.common.util.statshelper</a></li>
                                <li><a href="../classes/IBMCore.common.util.storage.html">IBMCore.common.util.storage</a></li>
                                <li><a href="../classes/IBMCore.common.util.string.htmlspecialchars.html">IBMCore.common.util.string.htmlspecialchars</a></li>
                                <li><a href="../classes/IBMCore.common.util.url.html">IBMCore.common.util.url</a></li>
                                <li><a href="../classes/IBMCore.common.util.user.html">IBMCore.common.util.user</a></li>
                                <li><a href="../classes/IBMCore.common.widget.carousel.html">IBMCore.common.widget.carousel</a></li>
                                <li><a href="../classes/IBMCore.common.widget.ccfintercept.html">IBMCore.common.widget.ccfintercept</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datatable.html">IBMCore.common.widget.datatable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datepicker.html">IBMCore.common.widget.datepicker</a></li>
                                <li><a href="../classes/IBMCore.common.widget.dyntabs.html">IBMCore.common.widget.dyntabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.fileinput.html">IBMCore.common.widget.fileinput</a></li>
                                <li><a href="../classes/IBMCore.common.widget.forms.html">IBMCore.common.widget.forms</a></li>
                                <li><a href="../classes/IBMCore.common.widget.formvalidator.html">IBMCore.common.widget.formvalidator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.leavingibm.html">IBMCore.common.widget.leavingibm</a></li>
                                <li><a href="../classes/IBMCore.common.widget.manager.html">IBMCore.common.widget.manager</a></li>
                                <li><a href="../classes/IBMCore.common.widget.masonry.html">IBMCore.common.widget.masonry</a></li>
                                <li><a href="../classes/IBMCore.common.widget.overlay.html">IBMCore.common.widget.overlay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.parallaxscroll.html">IBMCore.common.widget.parallaxscroll</a></li>
                                <li><a href="../classes/IBMCore.common.widget.rssdisplay.html">IBMCore.common.widget.rssdisplay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.scrollable.html">IBMCore.common.widget.scrollable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlist.html">IBMCore.common.widget.selectlist</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlistnav.html">IBMCore.common.widget.selectlistnav</a></li>
                                <li><a href="../classes/IBMCore.common.widget.setsameheight.html">IBMCore.common.widget.setsameheight</a></li>
                                <li><a href="../classes/IBMCore.common.widget.showhide.html">IBMCore.common.widget.showhide</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stepindicator.html">IBMCore.common.widget.stepindicator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stickytabs.html">IBMCore.common.widget.stickytabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.syntaxhighlighter.html">IBMCore.common.widget.syntaxhighlighter</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tablerowselector.html">IBMCore.common.widget.tablerowselector</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tooltip.html">IBMCore.common.widget.tooltip</a></li>
                                <li><a href="../classes/IBMCore.common.widget.twisty.html">IBMCore.common.widget.twisty</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videolooper.html">IBMCore.common.widget.videolooper</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.html">IBMCore.common.widget.videoplayer</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.kaltura.html">IBMCore.common.widget.videoplayer.kaltura</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.ustream.html">IBMCore.common.widget.videoplayer.ustream</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.youtube.html">IBMCore.common.widget.videoplayer.youtube</a></li>
                                <li><a href="../classes/IBMCore.namespace.html">IBMCore.namespace</a></li>
                                <li><a href="../classes/IBMCore.www.module.dynamiccontactmodule.html">IBMCore.www.module.dynamiccontactmodule</a></li>
                                <li><a href="../classes/IBMCore.www.module.truste.html">IBMCore.www.module.truste</a></li>
                                <li><a href="../classes/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../classes/jQuery.fn.dataTable.html">jQuery.fn.dataTable</a></li>
                                <li><a href="../classes/jQuery.fn.slick.html">jQuery.fn.slick</a></li>
                                <li><a href="../classes/jQuery.layout.html">jQuery.layout</a></li>
                                <li><a href="../classes/jQuery.os.html">jQuery.os</a></li>
                                <li><a href="../classes/jQuery:focusable.html">jQuery:focusable</a></li>
                                <li><a href="../classes/Masonry.html">Masonry</a></li>
                                <li><a href="../classes/Modernizr.html">Modernizr</a></li>
                                <li><a href="../classes/Mustache.html">Mustache</a></li>
                                <li><a href="../classes/NanoScroll.html">NanoScroll</a></li>
                                <li><a href="../classes/Other IBM - Canada notice loader.html">Other IBM - Canada notice loader</a></li>
                                <li><a href="../classes/Other IBM - common init.html">Other IBM - common init</a></li>
                                <li><a href="../classes/Other IBM - common v18 page tracker.html">Other IBM - common v18 page tracker</a></li>
                                <li><a href="../classes/Other IBM - errorchecking.html">Other IBM - errorchecking</a></li>
                                <li><a href="../classes/Other IBM - footer feedback link.html">Other IBM - footer feedback link</a></li>
                                <li><a href="../classes/Other IBM - grid change.html">Other IBM - grid change</a></li>
                                <li><a href="../classes/Other IBM - jstimer-end.html">Other IBM - jstimer-end</a></li>
                                <li><a href="../classes/Other IBM - jstimer-start.html">Other IBM - jstimer-start</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/IBMCore.html">IBMCore</a></li>
                                <li><a href="../modules/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../modules/jQuery.dataTable.html">jQuery.dataTable</a></li>
                                <li><a href="../modules/jQuery.slick.html">jQuery.slick</a></li>
                                <li><a href="../modules/Masonry.html">Masonry</a></li>
                                <li><a href="../modules/Modernizr.html">Modernizr</a></li>
                                <li><a href="../modules/Mustache.html">Mustache</a></li>
                                <li><a href="../modules/Nanoscroller.html">Nanoscroller</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4"style="float: left;width:75%;">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected" checked>
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private" checked>
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated" checked>
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/sources/ibm/common/modules/masthead-search.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                        
                        	Masthead search module
                        	&lt;br /&gt;
                        	&lt;br /&gt;This is the search field in the masthead, the mobile masthead overtake search, and the extra typeahead feature.
                        	&lt;br /&gt;This waits for masthead to be ready and then binds the masthead search item and creates everything beyond it.
                        
                        	@class IBMCore.common.module.mastheadsearch
                        
                        **/
                        
                        // TODO: This needs refactoring after verified it&#x27;s here to stay and not changing.
                        
                        (function($, IBM) {
                          /**
                        		Publishes this event after search function is built.
                        
                        		@event ready
                        	**/
                          var me = IBM.namespace(IBM, &#x27;common.module.mastheadsearch&#x27;),
                            myEvents = IBM.common.util.eventCoordinator(me, &#x27;Mastheadsearch&#x27;, [
                              &#x27;ready&#x27;,
                            ]),
                            defaultTypeaheadRequestPause = 50, // # of MS to wait between typing before making a WSR.
                            displayState = &#x27;default&#x27;,
                            $elements = {
                              body: {},
                              inputField: {},
                              searchScope: {},
                              searchButton: {},
                              searchCloseButton: {},
                              searchForm: {},
                              searchModule: {},
                              typeaheadContainer: {},
                              typeaheadUl: {},
                            },
                            latestText = &#x27;&#x27;,
                            marketplaceScopeSetup = false,
                            requestCount = 0,
                            typeaheadResultsShowing = false;
                        
                          me.isLoaded = false;
                        
                          /**
                        		Callback from subscription to meta data &#x27;ready&#x27; event publisher.
                        		&lt;br /&gt;If masthead and search are enabled (default), subscribe to masthead then init masthead
                        		search (currently just does the mobile takeover parts).
                        		&lt;br /&gt;If masthead search typeahead is enabled (default), subscribe to search then init typeahead feature.
                        
                        		@method autoInit
                        	**/
                          me.autoInit = function() {
                            // masthead needs to be enabled for masthead.search to be enabled.
                            // masthead.search needs to be enabled for masthead.search.typeahead to be enabled.
                            // We only allow search to be hidden when masthead is ENABLED. We don&#x27;t hide it if masthead is disabled.
                            // If they want a minimal masthead (logo only): enable &quot;alternate&quot; masthead and disable search, profile, mobilemenu via config.set.
                            if (IBM.common.util.config.isEnabled(&#x27;masthead&#x27;)) {
                              if (IBM.common.util.config.isEnabled(&#x27;masthead.search&#x27;)) {
                                IBM.common.module.masthead.subscribe(
                                  &#x27;ready&#x27;,
                                  &#x27;mastheadsearch&#x27;,
                                  function() {
                                    setTimeout(me.init, 100);
                                    IBM.common.module.masthead.pauseSubscription(
                                      &#x27;ready&#x27;,
                                      &#x27;mastheadsearch&#x27;
                                    );
                                  }
                                );
                        
                                // Masthead AND search are enabled, so check if typeahead is enabled and set it up after search is setup.
                                if (IBM.common.util.config.isEnabled(&#x27;masthead.search.typeahead&#x27;)) {
                                  me.subscribe(&#x27;ready&#x27;, &#x27;mastheadsearchtypeahead&#x27;, function() {
                                    initTypeahead();
                                  });
                                }
                              } else {
                                $(function() {
                                  $(document.getElementById(&#x27;ibm-search-module&#x27;)).addClass(&#x27;ibm-hide&#x27;);
                                });
                              }
                            }
                          };
                        
                          /**
                        		Callback from subscription to masthead &#x27;ready&#x27; event publisher, inside autoInit.
                        		&lt;br /&gt;Moves the search field into an overlay and binds the icon to open it and do all associated functions.
                        
                        		@method init
                        	**/
                          // This was auto-init&#x27;d inside a timeout and masthead is ready (on screen).
                          me.init = function() {
                            // Cache some element selectors.
                            $elements.body = $(document.body);
                            $elements.inputField = $(document.getElementById(&#x27;q&#x27;));
                            $elements.searchButton = $(document.getElementById(&#x27;ibm-search&#x27;));
                            $elements.searchForm = $(document.getElementById(&#x27;ibm-search-form&#x27;));
                            $elements.searchModule = $(document.getElementById(&#x27;ibm-search-module&#x27;));
                        
                            // Close button for the search overtake in MOBILE masthead.
                            // Onclick, hide the typeahead container and set search back to minimized/trigger version.
                            $elements.searchCloseButton = $(
                              &#x27;&lt;div class=&quot;ibm-masthead-search-close&quot;&gt;&lt;p class=&quot;ibm-ind-link ibm-icononly ibm-padding-bottom-0&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;ibm-close-link ibm-nospacing&quot;&gt;&#x27; +
                                IBM.common.translations.data.v18main.misc.close +
                                &#x27;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&#x27;
                            )
                              .insertBefore(&#x27;#ibm-search-form&#x27;)
                              .on(&#x27;click&#x27;, function(evt) {
                                evt.preventDefault();
                                showAs(&#x27;minimized&#x27;);
                                showTypeaheadResults(false);
                                $elements.searchButton.focus();
                              })
                              .find(&#x27;a&#x27;);
                        
                            // Setup the search field. Really just the mobile version that takes over the masthead.
                            setupSearchField();
                        
                            me.isLoaded = true;
                            myEvents.publish(&#x27;ready&#x27;);
                          };
                        
                          /**
                        		Called from subscriptions of if mashtead, masthead search, and masthead typeahead are enabled.
                        		Can&#x27;t do shit without those. This sets up type-ahead keypress functions and WSR to get suggested terms.
                        
                        		@method initTypeahead
                        		@private
                        	**/
                          function initTypeahead() {
                            // TODO: Santelia: can we just empty it and only inject if not exists and don&#x27;t re-bind.?
                            // Remove for dynamic meta locale change. Kills all bindings also.
                            if (!$elements.typeaheadContainer[0]) {
                              $elements.typeaheadContainer = $(
                                &#x27;&lt;div id=&quot;ibm-search-typeahead-container&quot; aria-expanded=&quot;false&quot; class=&quot;ibm-search-typeahead-container&quot;&gt;&lt;/div&gt;&#x27;
                              ).insertAfter($elements.searchModule);
                            } else {
                              $elements.typeaheadContainer.empty();
                            }
                        
                            $elements.typeaheadUl = $(
                              &#x27;&lt;ul class=&quot;ibm-plain-list ibm-padding-bottom-0&quot; role=&quot;listbox&quot; aria-live=&quot;polite&quot; aria-label=&quot;&#x27; +
                                (IBM.common.translations.data.v18main.misc.resultsNav ||
                                  &#x27;Suggestions&#x27;) +
                                &#x27;&quot;&gt;&lt;/ul&gt;&#x27;
                            );
                        
                            // Change input field to add proper a11y tagging since it&#x27;s now an autocomplete setup.
                            $elements.inputField.attr({
                              role: &#x27;combobox&#x27;,
                              &#x27;aria-autocomplete&#x27;: &#x27;list&#x27;,
                              &#x27;aria-expanded&#x27;: &#x27;false&#x27;,
                              &#x27;aria-owns&#x27;: &#x27;ibm-search-typeahead-container&#x27;,
                            });
                        
                            // @aria-activedescendant=&quot;id-of-selected-option&quot; is added to input field dynamically on arrow
                            //  key press which is the key to being able to keep the focus on the input field and why we don&#x27;t
                            //  need to change focus to the result list.
                            // It tells ATs that $thisID is the one currently highlighted and it will read that ID&#x27;s
                            //  text as if it had focus.
                        
                            // Bind the results so when you click on one, it replaces the input text with it.
                            $elements.typeaheadUl
                              .on(&#x27;focusin&#x27;, function() {
                                //clearTimeout(closeTimer);
                              })
                              .on(&#x27;click&#x27;, function(evt) {
                                //clearTimeout(closeTimer);
                                if ($(evt.target).closest(&#x27;.typeahead-nooption&#x27;)[0]) {
                                  return;
                                }
                        
                                evt.preventDefault();
                                evt.stopPropagation();
                                setTypeaheadItemActive($(evt.target));
                                setInputFieldValue();
                                $elements.searchForm.submit();
                              })
                              .on(&#x27;mouseover&#x27;, function(evt) {
                                var $hoverItem = $(evt.target);
                        
                                if ($hoverItem[0].nodeName.toLowerCase() !== &#x27;li&#x27;) {
                                  $hoverItem = $hoverItem.parent();
                                }
                        
                                // If element is not a valid option, don&#x27;t set it to active.
                                if ($hoverItem.hasClass(&#x27;typeahead-nooption&#x27;)) {
                                  return;
                                }
                        
                                $elements.typeaheadUl.find(&#x27;li&#x27;).removeClass(&#x27;ibm-active&#x27;);
                                $hoverItem.addClass(&#x27;ibm-active&#x27;);
                              });
                        
                            // NO inline code in here. This should only be logic and call functions.
                            // &quot;input&quot; event covers pasting and fires on keyup
                            $elements.inputField
                              .on(&#x27;input&#x27;, function() {
                                requestTypeaheadText();
                                showInlinelinks(false);
                              })
                              .on(&#x27;focus&#x27;, function() {
                                // If there is a value in the field, show the results on FIELD focus only.
                                if ($elements.inputField.val() !== &#x27;&#x27;) {
                                  showInlinelinks(false);
                                  showTypeaheadResults(true);
                                }
                              })
                              .on(&#x27;keydown&#x27;, function(evt) {
                                // HAVE to use keycode for xbrowser support.
                                var keyCode = evt.keyCode;
                        
                                // LEFT/RIGHT/TAB
                                // Let natural behavior happen if: left/right arrow or tab.
                                if (keyCode === 37 || keyCode === 39) {
                                  return;
                                }
                        
                                if (evt.keyCode === 9 &amp;&amp; evt.shiftKey) {
                                  if (getDisplayState() !== &#x27;maximized&#x27;) {
                                    showTypeaheadResults(false);
                                    showInlinelinks(true);
                                  }
                                }
                        
                                // UP/DOWN:
                                // If not showing, request current value typeahead
                                // else goto next if it&#x27;s already showing.
                                // UP
                                if (keyCode === 38) {
                                  evt.preventDefault();
                        
                                  if (!typeaheadResultsShowing) {
                                    requestTypeaheadText();
                                  } else {
                                    gotoPrevTypeaheadResult();
                                    setInputFieldValue();
                                  }
                                }
                                // DOWN
                                else if (keyCode === 40) {
                                  evt.preventDefault();
                        
                                  if (!typeaheadResultsShowing) {
                                    requestTypeaheadText();
                                  } else {
                                    gotoNextTypeaheadResult();
                                    setInputFieldValue();
                                  }
                                }
                              });
                        
                            setupCloseOnscroll();
                        
                            $elements.body.on(&#x27;click&#x27;, function(evt) {
                              if (getDisplayState() === &#x27;maximized&#x27;) {
                                return;
                              }
                        
                              if (!$(evt.target).closest(&#x27;.ibm-masthead-rightside&#x27;)[0]) {
                                showTypeaheadResults(false);
                                showInlinelinks(true);
                              }
                            });
                        
                            // Create a tab ring when the masthead takeover/mini-overlay exists. Forces everyone to use close button.
                            // If not on special small screen tab ring, then close the typeahead on forward tab out of search submit.
                            $elements.searchButton.on(&#x27;keydown&#x27;, function(evt) {
                              if (evt.keyCode === 9 &amp;&amp; !evt.shiftKey) {
                                if (getDisplayState() === &#x27;maximized&#x27;) {
                                  //evt.preventDefault();
                                  //$elements.searchCloseButton.focus();
                                } else {
                                  showTypeaheadResults(false);
                                  //showInlinelinks(true);
                                }
                              }
                            });
                          }
                        
                          /**
                        		Empties the typeahead UL (removes the LIs) if there are items in it.
                        
                        		@method clearTypeahead
                        	**/
                          me.clearTypeahead = clearTypeahead;
                          function clearTypeahead() {
                            if ($elements.typeaheadUl.length &gt; 0) {
                              $elements.typeaheadUl.empty();
                            }
                          }
                        
                          /**
                        		Creates the typeahead UL from the passed results, highlights the string passed,
                        		injects it into the box and shows the drop-down box.
                        
                        		@method createTypeahead
                        		@param searchString (String) The string that was searched on that provided the results object. Used to highlight (bold) them inthe list
                        		@param results (Object) The data object of returned results. Loops thru these and creates a list item using each one&#x27;s text.
                        	**/
                          me.createTypeahead = createTypeahead;
                          function createTypeahead(searchString, results) {
                            var items = results,
                              lis = &#x27;&#x27;,
                              maxNum = 6,
                              searchedFor = searchString;
                        
                            items.sort();
                        
                            // Update this to better include min/max #s with &#x27;for&#x27;.
                            $.each(items, function(i, v) {
                              var term = v,
                                reg = new RegExp(searchedFor, &#x27;i&#x27;);
                        
                              term = term.replace(reg, &#x27;&lt;strong&gt;&#x27; + searchedFor + &#x27;&lt;/strong&gt;&#x27;);
                        
                              if (i &lt; maxNum) {
                                lis +=
                                  &#x27;&lt;li id=&quot;ibm-search-overlay-typeahead-res-&#x27; +
                                  i +
                                  &#x27;&quot; role=&quot;option&quot; tabindex=&quot;-1&quot;&gt;&#x27; +
                                  term +
                                  &#x27;&lt;/li&gt;&#x27;;
                              }
                            });
                        
                            // If they emptied the field after this WSR ran, clear the typeaheads.
                            if ($elements.inputField.val() === &#x27;&#x27;) {
                              clearTypeahead();
                              showTypeaheadResults(false);
                            } else {
                              // Inject typeahead list on first time we have results.
                              if (!$elements.typeaheadContainer.find(&#x27;ul&#x27;)[0]) {
                                $elements.typeaheadContainer.html($elements.typeaheadUl);
                              }
                        
                              $elements.typeaheadUl.html(lis);
                        
                              showTypeaheadResults(true);
                            }
                          }
                        
                          /**
                        		Public method/API that simply returns the display state of the typeahead box.
                        
                        		@method getDisplayState
                        		@return {String} The state name that the typeahead container is in.
                        	**/
                          me.getDisplayState = getDisplayState;
                          function getDisplayState() {
                            return displayState;
                          }
                        
                          /**
                        		Object for a WSR callback. Uses timeout to kills the previous called WSR if it has not already been called.
                        		&lt;br /&gt;This is a &quot;wait this long to call this function&quot; setup. AKA: Throttling.
                        
                        		@method makeTypeaheadRequest
                        		@param callback {Function} The function to call after X ms have passed.
                        		@param ms {Integer} The # of milliseconds to wait before running the passed function. If this function was called again within the time before the previous one was run, the previous one is cancelled and the timer starts over for the latest called function.
                        	**/
                          me.makeTypeaheadRequest = (function() {
                            var timer = 0;
                            return function(callback, ms) {
                              var waitTime = ms || defaultTypeaheadRequestPause;
                              clearTimeout(timer);
                              timer = setTimeout(callback, waitTime);
                            };
                          })();
                        
                          /**
                        		Moves the &quot;active&quot; class to the next item in the list. Used on callback of an arrow key press.
                        		&lt;br /&gt;Loops to first item if the bottom list item is active and you want to &quot;go to next&quot;.
                        
                        		@method gotoNextTypeaheadResult
                        		@private
                        	**/
                          function gotoNextTypeaheadResult() {
                            var $nextItem = $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).next(&#x27;li&#x27;);
                        
                            $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).removeClass(&#x27;ibm-active&#x27;);
                        
                            if ($nextItem[0]) {
                              $nextItem.addClass(&#x27;ibm-active&#x27;);
                            } else {
                              $elements.typeaheadUl.find(&#x27;li:first&#x27;).addClass(&#x27;ibm-active&#x27;);
                            }
                        
                            // If this item if the section heading, skip it and goto the next one.
                            if (
                              $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).hasClass(&#x27;typeahead-nooption&#x27;)
                            ) {
                              gotoNextTypeaheadResult();
                            }
                          }
                        
                          /**
                        		Moves the &quot;active&quot; class to the previous item in the list. Used on callback of an arrow key press.
                        		&lt;br /&gt;Loops to last item if the first list item is active and you want to &quot;go to previous&quot;.
                        
                        		@method gotoPrevTypeaheadResult
                        		@private
                        	**/
                          function gotoPrevTypeaheadResult() {
                            var $prevItem = $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).prev(&#x27;li&#x27;);
                        
                            $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).removeClass(&#x27;ibm-active&#x27;);
                        
                            if ($prevItem[0]) {
                              $prevItem.addClass(&#x27;ibm-active&#x27;);
                            } else {
                              $elements.typeaheadUl.find(&#x27;li:last&#x27;).addClass(&#x27;ibm-active&#x27;);
                            }
                        
                            // If this item if the section heading, skip it and goto the next one.
                            if (
                              $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).hasClass(&#x27;typeahead-nooption&#x27;)
                            ) {
                              gotoPrevTypeaheadResult();
                            }
                          }
                        
                          /**
                        		Calls the typeahead service, only if the term is not the same as the last one, and &quot;force&quot; wasn&#x27;t used.
                        		&lt;br /&gt;Includes switch for default Marketplace TA service if page doesn&#x27;t have their own custom form and the default
                        		 Marketplace one was used.
                        
                        		@method requestTypeaheadText
                        		@param forceRequest (Boolean) True if you want to force the WSR even if the term is the same. Used for the checkbox scope toggle.
                        		@private
                        	**/
                          function requestTypeaheadText(forceRequest) {
                            var currentSearchTerm = $elements.inputField[0].value;
                        
                            // If the current text is the same as the latest one we set (meaning the text hasn&#x27;t changed on the keyup),
                            //  then stop and don&#x27;t do another WSR (b/c the text hasn&#x27;t changed).
                            if (currentSearchTerm === latestText &amp;&amp; !forceRequest) {
                              return;
                            }
                        
                            latestText = currentSearchTerm;
                        
                            // If they cleared the search field (there&#x27;s no value in the text field), remove the typeahead box and stop.
                            if (currentSearchTerm === &#x27;&#x27;) {
                              me.makeTypeaheadRequest(function() {
                                clearTypeahead();
                                showTypeaheadResults(false);
                              }, defaultTypeaheadRequestPause + 10);
                        
                              return;
                            }
                        
                            // Call the make request function (handles cancelling previous calls before timeout runs),
                            // On callback (when timeout runs), we process the response accordingly:
                            // Make the request, tagging it with a # (incremented).
                            // When the callback fires, we store the data no matter what for faster repeat search terms,
                            // BUT only update the typeahead box if *this* request is the most recent one.
                        
                            // If:
                            //   1. The scoped search box is checked (indicating the user wants to scope the search)
                            //   +
                            //   2. The page has indicated that they have a custom function to call for typeahead.
                            //  === We call their custom function instead of our default masthead typeahead one.
                        
                            // If we didn&#x27;t add the default MP form and TA service, and a custom form is enabled
                            //  with a typeahead, use the page&#x27;s custom TA service.
                            // Else if we setup MP and the box IS checked, use MP TA sevice.
                            // Else use default ibm.com search TA service.
                            // MP type-ahead service URL change; Nov 8 2016, per Seth Packham.
                            //   previous was:  https://www.ibm.com/marketplace/api/search/v3/suggestions
                            if (
                              !marketplaceScopeSetup &amp;&amp;
                              $elements.searchScope.find(&#x27;:checkbox&#x27;).prop(&#x27;checked&#x27;) &amp;&amp;
                              me.customTypeaheadFunction
                            ) {
                              me.customTypeaheadFunction(currentSearchTerm);
                            } else if (
                              marketplaceScopeSetup &amp;&amp;
                              $elements.searchScope.find(&#x27;:checkbox&#x27;).prop(&#x27;checked&#x27;)
                            ) {
                              me.makeTypeaheadRequest(function() {
                                $.ajax({
                                  url:
                                    &#x27;https://www.ibm.com/marketplace/api/search/v3/combined_suggestions?locale=&#x27; +
                                    IBM.common.util.meta.getPageLc() +
                                    &#x27;-&#x27; +
                                    IBM.common.util.meta.getPageCc() +
                                    &#x27;&amp;q=&#x27; +
                                    currentSearchTerm,
                                  dataType: &#x27;json&#x27;,
                                  searchString: currentSearchTerm,
                                  requestCount: ++requestCount,
                                  success: function(response) {
                                    // If this request isn&#x27;t the latest one (fast typers), don&#x27;t update the TA box with it&#x27;s results.
                                    if (requestCount !== this.requestCount) {
                                      return;
                                    }
                        
                                    // Merge phrase suggestions and product suggestions into one array of terms to show.
                                    // Format the response terms into a clean plain array of string terms.
                                    var termsArr = [],
                                      i = 0,
                                      mpPhrases = response[&#x27;phrase-suggestions&#x27;].options,
                                      mpProducts = response[&#x27;product-suggestions&#x27;].results.items;
                        
                                    // If the service returned PHRASES, add them.
                                    if (mpPhrases.length &gt; 0) {
                                      for (i = 0; i &lt; mpPhrases.length; i++) {
                                        termsArr.push(mpPhrases[i].text);
                                      }
                                    }
                        
                                    // If the service returned PRODUCTS, add them.
                                    if (mpProducts.length &gt; 0) {
                                      for (i = 0; i &lt; mpProducts.length; i++) {
                                        termsArr.push(mpProducts[i].fields[&#x27;doc.name&#x27;][0]);
                                      }
                                    }
                        
                                    me.createTypeahead(this.searchString, termsArr);
                                  },
                                  error: function(response) {
                                    window.console.error(&#x27;Error calling typeahead service: &#x27;, response);
                                  },
                                });
                              });
                            } else {
                              me.makeTypeaheadRequest(function() {
                                $.ajax({
                                  url:
                                    &#x27;https://www-api.ibm.com/search/typeahead/v1?lang=&#x27; +
                                    IBM.common.util.meta.getPageLc() +
                                    &#x27;&amp;cc=&#x27; +
                                    IBM.common.util.meta.getPageCc() +
                                    &#x27;&amp;query=&#x27; +
                                    currentSearchTerm,
                                  dataType: &#x27;jsonp&#x27;,
                                  searchString: currentSearchTerm,
                                  requestCount: ++requestCount,
                                  success: function(data) {
                                    // If this request isn&#x27;t the latest one (fast typers), don&#x27;t update the TA box with it&#x27;s results.
                                    if (requestCount !== this.requestCount) {
                                      return;
                                    }
                        
                                    // Format the response terms into a clean plain array of string terms.
                                    var termsArr = [],
                                      i = 0,
                                      len = data.response.length;
                        
                                    for (i; i &lt; len; i++) {
                                      termsArr.push(data.response[i][0]);
                                    }
                        
                                    me.createTypeahead(this.searchString, termsArr);
                                  },
                                  error: function(response) {
                                    window.console.error(&#x27;Error calling typeahead service: &#x27;, response);
                                  },
                                });
                              });
                            }
                          }
                        
                          /**
                        		Sets the field value to be the text from the currently active/highlighted item in the typeahead container and sets the
                        		 a11y tagging for it.
                        
                        		 @method setInputFieldValue
                        		 @private
                        	**/
                          function setInputFieldValue() {
                            // Set active dedcendent attr. on field to tell ATs this one is active so they read it since we don&#x27;t
                            //  focus on it, then change the text in the text field.
                            $elements.inputField.attr(
                              &#x27;aria-activedescendant&#x27;,
                              $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).attr(&#x27;id&#x27;)
                            );
                        
                            $elements.inputField.val(
                              $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).text()
                            );
                          }
                        
                          /**
                        		Used onclick of a typeahead entry. Grabs the value and puts it as the search field value.
                        
                        		 @method setTypeaheadItemActive
                        		 @private
                        		 @param $el {jQuery element selector} The element (LI) to grab the value of and put into the search field value.
                        	**/
                          function setTypeaheadItemActive($el) {
                            if ($el[0].nodeName.toLowerCase() !== &#x27;li&#x27;) {
                              $el = $el.parent();
                            }
                        
                            // Stop and don&#x27;t highlight it if it&#x27;s the heading.
                            if ($el.hasClass(&#x27;typeahead-nooption&#x27;)) {
                              return;
                            }
                        
                            $elements.typeaheadUl.find(&#x27;li.ibm-active&#x27;).removeClass(&#x27;ibm-active&#x27;);
                        
                            $el.addClass(&#x27;ibm-active&#x27;);
                        
                            $elements.inputField.focus();
                          }
                        
                          /**
                        		Injects the default Marketplace scoped search form if none already existed on the page/HTML and
                        		 sets up and binds the submit, open/close of the search field.
                        
                        		 @method setupSearchField
                        		 @private
                        	**/
                          function setupSearchField() {
                            // Marketplace search form convention: https://www.ibm.com/marketplace/search/$cc/$lc-$cc
                            // Oct 24, 2018, New Marketplace search form convention per Dav McDuff and Nixon Cheaz:
                            //   https://www.ibm.com/search?lang=en&amp;cc=us&amp;q=watson&amp;tabType[0]=Products
                        
                            var $localSearchForm = $elements.searchModule.find(
                                &quot;form:not(&#x27;#ibm-search-form&#x27;)&quot;
                              ),
                              marketplaceSearchForm =
                                &#x27;&lt;form class=&quot;ibm-hide&quot; id=&quot;ibm-default-scope-form&quot; action=&quot;https://www.ibm.com/search&quot; method=&quot;get&quot;&gt;&lt;input name=&quot;lang&quot; type=&quot;hidden&quot; value=&quot;&#x27; +
                                IBM.common.util.meta.getPageLc() +
                                &#x27;&quot;&gt;&lt;input name=&quot;cc&quot; type=&quot;hidden&quot; value=&quot;&#x27; +
                                IBM.common.util.meta.getPageCc() +
                                &#x27;&quot;&gt;&lt;input name=&quot;tabType[0]&quot; type=&quot;hidden&quot; value=&quot;Products&quot;&gt;&lt;input name=&quot;q&quot; type=&quot;text&quot; value=&quot;&quot;&gt;&lt;input name=&quot;lnk&quot; type=&quot;hidden&quot; value=&quot;mhmpsrch&quot;&gt;&lt;/form&gt;&#x27;;
                        
                            // If there&#x27;s no existing &quot;local search&quot; form in the masthead, add the default Marketplace
                            //  local search form and scope search checkbox. Set flag so we know it&#x27;s used and a local one isn&#x27;t used.
                            // Else, add data-init to scoped search checkbox and init teh new checkbox plugin on it.
                            if (!$localSearchForm[0]) {
                              $localSearchForm = $(marketplaceSearchForm).insertAfter(
                                &#x27;#ibm-search-form&#x27;
                              );
                              marketplaceScopeSetup = true;
                            }
                        
                            // Turn off autocomplete and add a tracking param.
                            $elements.inputField
                              .attr(&#x27;autocomplete&#x27;, &#x27;off&#x27;)
                              .after(&#x27;&lt;input name=&quot;lnk&quot; type=&quot;hidden&quot; value=&quot;mhsrch&quot;&gt;&#x27;);
                        
                            // Select and cache a search scope container (the span that houses the checkbox.)
                            $elements.searchScope = $elements.searchModule.find(&#x27;.ibm-search-scope&#x27;);
                        
                            // Tag the form if it has a scope checkbox so we can style it differently.
                            if ($elements.searchScope[0]) {
                              $elements.searchModule.addClass(&#x27;ibm-has-scope&#x27;);
                            }
                        
                            // Bind the search submit.
                            $elements.searchForm.submit(function(evt) {
                              // Prevent the search from submitting if it&#x27;s empty.
                              if ($elements.inputField.val() === &#x27;&#x27;) {
                                evt.preventDefault();
                                return;
                              }
                        
                              // If they have a custom form and the box is checked: submit their custom form.
                              if (
                                $elements.searchScope.find(&#x27;:checkbox&#x27;).prop(&#x27;checked&#x27;) &amp;&amp;
                                $localSearchForm[0]
                              ) {
                                evt.preventDefault();
                                $localSearchForm.find(&#x27;input:text&#x27;).val($elements.inputField.val());
                                $localSearchForm.submit();
                              }
                            });
                        
                            //// Mobile search masthead takeover.
                        
                            // On focus of the search field (when minimized), take over the masthead and show the search container.
                            $elements.inputField.on(&#x27;focus&#x27;, function() {
                              // If the search field is minimized, show it on focus.
                              if (getDisplayState() === &#x27;minimized&#x27;) {
                                showAs(&#x27;maximized&#x27;);
                              }
                            });
                        
                            // Create a tab ring on mobile masthead takeover. Forces everyone to use close button.
                            // If not on special small screen tab ring, then close the typeahead on forward tab out of search submit.
                            $elements.searchButton.on(&#x27;keydown&#x27;, function(evt) {
                              // If they are on the search submit and hit tab (forward), loop back to close button if showing
                              // Else,
                              if (evt.keyCode === 9 &amp;&amp; !evt.shiftKey) {
                                if (getDisplayState() === &#x27;maximized&#x27;) {
                                  evt.preventDefault();
                                  $elements.searchCloseButton.focus();
                                } else {
                                  //showTypeaheadResults(false);
                                  showInlinelinks(true);
                                }
                              }
                            });
                        
                            // Create a tab ring when the masthead takeover/mini-overlay exists. Forces everyone to use close button.
                            $elements.searchCloseButton.on(&#x27;keydown&#x27;, function(evt) {
                              if (evt.keyCode === 9 &amp;&amp; evt.shiftKey) {
                                evt.preventDefault();
                                $elements.searchButton.focus();
                              }
                            });
                        
                            $elements.searchScope.find(&#x27;:checkbox&#x27;).on(&#x27;change&#x27;, function() {
                              requestTypeaheadText(true);
                            });
                          }
                        
                          /**
                        		If the user scrolls while the typeahead box is opened, this closes it.
                        
                        		@method setupCloseOnscroll
                        		@private
                        	**/
                          function setupCloseOnscroll() {
                            var didScroll = false;
                        
                            $(window).on(&#x27;scroll&#x27;, function() {
                              didScroll = true;
                            });
                        
                            setInterval(function() {
                              if (didScroll) {
                                didScroll = false;
                        
                                if (
                                  !document.getElementsByClassName(&#x27;ibm-masthead-search-maximized&#x27;)[0]
                                ) {
                                  showTypeaheadResults(false);
                                  showInlinelinks(true);
                                }
                              }
                            }, 100);
                          }
                        
                          /**
                        		Fade in or out the masthead main links. Used on focus of search box to help reduce &quot;noise&quot; while using the search field
                        		 and typeahead container.
                        
                        		@method showInlinelinks
                        		@param b {Boolean} True to fade the masthead links back in, false to fade them out.
                        		@private
                        	**/
                          function showInlinelinks(b) {
                            if (b) {
                              if (getDisplayState() === &#x27;default&#x27;) {
                                $(&#x27;.ibm-masthead-categories, .ibm-mh-marketplace-link&#x27;)
                                  .addClass(&#x27;ibm-fadein&#x27;)
                                  .removeClass(&#x27;ibm-fadeout&#x27;);
                              }
                            } else {
                              $(&#x27;.ibm-masthead-categories, .ibm-mh-marketplace-link&#x27;)
                                .addClass(&#x27;ibm-fadeout&#x27;)
                                .removeClass(&#x27;ibm-fadein&#x27;);
                            }
                          }
                        
                          /**
                        		Sets the display type of the search field, used based on screen width/realestate and open/close features.
                        		&lt;br /&gt;minimized = small screen icon only
                        		&lt;br /&gt;maximized = small screen full-width masthead takeover
                        		&lt;br /&gt;default = default inline search field (non-small-screen)
                        
                        		@method showAs
                        		@param type {String} The display type to show the search field as.
                        	**/
                          me.showAs = showAs;
                          function showAs(type) {
                            if (type === &#x27;default&#x27;) {
                              showInline();
                              displayState = &#x27;default&#x27;;
                            } else if (type === &#x27;minimized&#x27;) {
                              showMinimized();
                              displayState = &#x27;minimized&#x27;;
                            } else if (type === &#x27;maximized&#x27;) {
                              showMaximized();
                              displayState = &#x27;maximized&#x27;;
                            }
                          }
                        
                          /**
                        		Removes all special classes and causes (CSS) to show it as default inline search field in masthead. (default design state).
                        
                        		@method showInline
                        		@private
                        	**/
                          function showInline() {
                            $(document.body).removeClass(
                              &#x27;ibm-masthead-search-minimized ibm-masthead-search-maximized&#x27;
                            );
                          }
                        
                          /**
                        		Add class to show it as maximized (masthead takeover, small screen) and freeze scrollbars (prevent body scrolling).
                        
                        		@method showMaximized
                        		@private
                        	**/
                          function showMaximized() {
                            $(document.body)
                              .removeClass(&#x27;ibm-masthead-search-minimized&#x27;)
                              .addClass(&#x27;ibm-masthead-search-maximized&#x27;);
                            IBM.common.util.freezeScrollbars(true);
                          }
                        
                          /**
                        		Add class to show it as minimized (icon only, small screen) and un-freeze scrollbars.
                        
                        		@method showMinimized
                        		@private
                        	**/
                          function showMinimized() {
                            $(document.body)
                              .addClass(&#x27;ibm-masthead-search-minimized&#x27;)
                              .removeClass(&#x27;ibm-masthead-search-maximized&#x27;);
                            IBM.common.util.freezeScrollbars(false);
                          }
                        
                          /**
                        		Shows/hides the actual typeahead container.
                        
                        		@method showTypeaheadResults
                        		@param b {Boolean} True to show the typeahead container, false to hide it.
                        	**/
                          me.showTypeaheadResults = showTypeaheadResults;
                          function showTypeaheadResults(b) {
                            if (b) {
                              $elements.typeaheadContainer
                                .add($elements.searchScope)
                                .addClass(&#x27;ibm-fadein&#x27;)
                                .removeClass(&#x27;ibm-fadeout&#x27;)
                                .attr(&#x27;aria-expanded&#x27;, true);
                              $elements.inputField.attr(&#x27;aria-expanded&#x27;, true);
                              typeaheadResultsShowing = true;
                            } else {
                              $elements.typeaheadContainer
                                .add($elements.searchScope)
                                .addClass(&#x27;ibm-fadeout&#x27;)
                                .removeClass(&#x27;ibm-fadein&#x27;)
                                .attr(&#x27;aria-expanded&#x27;, true);
                              $elements.inputField.attr(&#x27;aria-expanded&#x27;, false);
                              typeaheadResultsShowing = false;
                            }
                          }
                        
                          /* Wait for events to happen.
                           **********************************************************************************************/
                        
                          // When meta data is ready (config), call auto init.
                          IBM.common.meta
                            .subscribe(&#x27;dataReady&#x27;, &#x27;mastheadsearch&#x27;, me.autoInit)
                            .runAsap(me.autoInit);
                        })(jQuery, IBMCore);
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
