<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index,follow">
    <title>src/js/sources/ibm/common/widgets/videoplayer-ustream.js - IBM v18 (Northstar) common Javascript documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" href="http://www.ibm.com/favicon.ico">
    <script>
        digitalData = {
            page: {
                pageInfo: {
                    effectiveDate: '2017-02-25',
                    expiryDate: '2020-02-25',
                    language: 'en-US',
                    publishDate: '2017-02-25',
                    publisher: 'IBM Corporation',
                    ibm: {
                        contentDelivery: 'yuidoc via grunt',
                        contentProducer: 'Michael Santelia',
                        country: 'US',
                        owner: 'Michael Santelia'
                    }
                }
            }
        };
    </script>

    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>

    <script>

		var lastUpdate = new Date(document.lastModified),
			updatedMonth = lastUpdate.getMonth(),
			updatedDate = lastUpdate.getDate(),
			updatedYear = lastUpdate.getFullYear(),
			today = new Date(),
			todayMonth = today.getMonth(),
			todayDate = today.getDate(),
			todayYear = today.getFullYear(),
			monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"],
			lastUpdatedText = "",
			daysAgo = Math.floor((today - lastUpdate) / (1000*60*60*24));

		updatedMonthName = monthNames[updatedMonth];

		switch (daysAgo) {

			case 1: 
				lastUpdatedText = "Updated yesterday";
				break;
				
			case 0: 
				lastUpdatedText = "Updated today";
				break;
				
			default: 
				lastUpdatedText = "Updated " + daysAgo + " days ago";
				break;
		}

		if (daysAgo > 4) {
			lastUpdatedText = "Updated: " + updatedMonthName + " " + updatedDate + ", " + updatedYear;
		}

    </script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-1-2">
            <div style="background: url(http://1.www.s81c.com/i/v17/t/ibm-logo.png) no-repeat scroll 0px 0px transparent; width: 105px; height: 45px; margin: 0.85em 0px;text-indent:-9999px;">IBM v18 (Northstar) common Javascript documentation</div>
        </div>
        <div class="yui3-u-1-2 version">
            <em>Javascript documentation for: IBM v18 (Northstar)<br />
            	<span style="font-size: 0.6em; position: absolute; right: 35px;"><script>document.writeln(lastUpdatedText)</script></span></em>
        </div>
    </div>
    
    <p><a href="../assets../../v18-js-source-documentation.zip" style="margin-left: 10px; padding-left: 15px; background: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_transactional_blue_ON.png) no-repeat 0 -202px;">Download a copy of this documentation (ZIP).</a></p>
    
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4" style="float: left;width:25%;">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/IBMCore.common.module.backtotop.html">IBMCore.common.module.backtotop</a></li>
                                <li><a href="../classes/IBMCore.common.module.canadanotice.html">IBMCore.common.module.canadanotice</a></li>
                                <li><a href="../classes/IBMCore.common.module.contactmodule.html">IBMCore.common.module.contactmodule</a></li>
                                <li><a href="../classes/IBMCore.common.module.footer.html">IBMCore.common.module.footer</a></li>
                                <li><a href="../classes/IBMCore.common.module.footermenu.html">IBMCore.common.module.footermenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.leftnav.html">IBMCore.common.module.leftnav</a></li>
                                <li><a href="../classes/IBMCore.common.module.liveperson.html">IBMCore.common.module.liveperson</a></li>
                                <li><a href="../classes/IBMCore.common.module.localeselector.html">IBMCore.common.module.localeselector</a></li>
                                <li><a href="../classes/IBMCore.common.module.localpagenotification.html">IBMCore.common.module.localpagenotification</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.html">IBMCore.common.module.masthead</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.sticky.html">IBMCore.common.module.masthead.sticky</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadbanner.html">IBMCore.common.module.mastheadbanner</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadsearch.html">IBMCore.common.module.mastheadsearch</a></li>
                                <li><a href="../classes/IBMCore.common.module.merchandising.html">IBMCore.common.module.merchandising</a></li>
                                <li><a href="../classes/IBMCore.common.module.mobilemenu.html">IBMCore.common.module.mobilemenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethiscontent.html">IBMCore.common.module.sharethiscontent</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethispage.html">IBMCore.common.module.sharethispage</a></li>
                                <li><a href="../classes/IBMCore.common.module.sitenavmenu.html">IBMCore.common.module.sitenavmenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.urx.html">IBMCore.common.module.urx</a></li>
                                <li><a href="../classes/IBMCore.common.translations.html">IBMCore.common.translations</a></li>
                                <li><a href="../classes/IBMCore.common.util.a11y.html">IBMCore.common.util.a11y</a></li>
                                <li><a href="../classes/IBMCore.common.util.addCssRule.html">IBMCore.common.util.addCssRule</a></li>
                                <li><a href="../classes/IBMCore.common.util.anchorlinkAdjustment.html">IBMCore.common.util.anchorlinkAdjustment</a></li>
                                <li><a href="../classes/IBMCore.common.util.bitly.html">IBMCore.common.util.bitly</a></li>
                                <li><a href="../classes/IBMCore.common.util.color.html">IBMCore.common.util.color</a></li>
                                <li><a href="../classes/IBMCore.common.util.config.html">IBMCore.common.util.config</a></li>
                                <li><a href="../classes/IBMCore.common.util.convertSecondsToHMS.html">IBMCore.common.util.convertSecondsToHMS</a></li>
                                <li><a href="../classes/IBMCore.common.util.cookie.html">IBMCore.common.util.cookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.coreservices.html">IBMCore.common.util.coreservices</a></li>
                                <li><a href="../classes/IBMCore.common.util.data.html">IBMCore.common.util.data</a></li>
                                <li><a href="../classes/IBMCore.common.util.debug.html">IBMCore.common.util.debug</a></li>
                                <li><a href="../classes/IBMCore.common.util.eventCoordinator.html">IBMCore.common.util.eventCoordinator</a></li>
                                <li><a href="../classes/IBMCore.common.util.freezeScrollbars.html">IBMCore.common.util.freezeScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.gatekeeper.html">IBMCore.common.util.gatekeeper</a></li>
                                <li><a href="../classes/IBMCore.common.util.generateId.html">IBMCore.common.util.generateId</a></li>
                                <li><a href="../classes/IBMCore.common.util.getCurrentGridSize.html">IBMCore.common.util.getCurrentGridSize</a></li>
                                <li><a href="../classes/IBMCore.common.util.getDataAttributes.html">IBMCore.common.util.getDataAttributes</a></li>
                                <li><a href="../classes/IBMCore.common.util.getScrollbarWidth.html">IBMCore.common.util.getScrollbarWidth</a></li>
                                <li><a href="../classes/IBMCore.common.util.has12grid.html">IBMCore.common.util.has12grid</a></li>
                                <li><a href="../classes/IBMCore.common.util.hasScrollbars.html">IBMCore.common.util.hasScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.meta.html">IBMCore.common.util.meta</a></li>
                                <li><a href="../classes/IBMCore.common.util.perf.html">IBMCore.common.util.perf</a></li>
                                <li><a href="../classes/IBMCore.common.util.queue.html">IBMCore.common.util.queue</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolledintoview.html">IBMCore.common.util.scrolledintoview</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolltracker.html">IBMCore.common.util.scrolltracker</a></li>
                                <li><a href="../classes/IBMCore.common.util.setIpcCookie.html">IBMCore.common.util.setIpcCookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.statshelper.html">IBMCore.common.util.statshelper</a></li>
                                <li><a href="../classes/IBMCore.common.util.storage.html">IBMCore.common.util.storage</a></li>
                                <li><a href="../classes/IBMCore.common.util.string.htmlspecialchars.html">IBMCore.common.util.string.htmlspecialchars</a></li>
                                <li><a href="../classes/IBMCore.common.util.url.html">IBMCore.common.util.url</a></li>
                                <li><a href="../classes/IBMCore.common.util.user.html">IBMCore.common.util.user</a></li>
                                <li><a href="../classes/IBMCore.common.widget.carousel.html">IBMCore.common.widget.carousel</a></li>
                                <li><a href="../classes/IBMCore.common.widget.ccfintercept.html">IBMCore.common.widget.ccfintercept</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datatable.html">IBMCore.common.widget.datatable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datepicker.html">IBMCore.common.widget.datepicker</a></li>
                                <li><a href="../classes/IBMCore.common.widget.dyntabs.html">IBMCore.common.widget.dyntabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.fileinput.html">IBMCore.common.widget.fileinput</a></li>
                                <li><a href="../classes/IBMCore.common.widget.forms.html">IBMCore.common.widget.forms</a></li>
                                <li><a href="../classes/IBMCore.common.widget.formvalidator.html">IBMCore.common.widget.formvalidator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.leavingibm.html">IBMCore.common.widget.leavingibm</a></li>
                                <li><a href="../classes/IBMCore.common.widget.manager.html">IBMCore.common.widget.manager</a></li>
                                <li><a href="../classes/IBMCore.common.widget.masonry.html">IBMCore.common.widget.masonry</a></li>
                                <li><a href="../classes/IBMCore.common.widget.overlay.html">IBMCore.common.widget.overlay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.parallaxscroll.html">IBMCore.common.widget.parallaxscroll</a></li>
                                <li><a href="../classes/IBMCore.common.widget.rssdisplay.html">IBMCore.common.widget.rssdisplay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.scrollable.html">IBMCore.common.widget.scrollable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlist.html">IBMCore.common.widget.selectlist</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlistnav.html">IBMCore.common.widget.selectlistnav</a></li>
                                <li><a href="../classes/IBMCore.common.widget.setsameheight.html">IBMCore.common.widget.setsameheight</a></li>
                                <li><a href="../classes/IBMCore.common.widget.showhide.html">IBMCore.common.widget.showhide</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stepindicator.html">IBMCore.common.widget.stepindicator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stickytabs.html">IBMCore.common.widget.stickytabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.syntaxhighlighter.html">IBMCore.common.widget.syntaxhighlighter</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tablerowselector.html">IBMCore.common.widget.tablerowselector</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tooltip.html">IBMCore.common.widget.tooltip</a></li>
                                <li><a href="../classes/IBMCore.common.widget.twisty.html">IBMCore.common.widget.twisty</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videolooper.html">IBMCore.common.widget.videolooper</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.html">IBMCore.common.widget.videoplayer</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.kaltura.html">IBMCore.common.widget.videoplayer.kaltura</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.ustream.html">IBMCore.common.widget.videoplayer.ustream</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.youtube.html">IBMCore.common.widget.videoplayer.youtube</a></li>
                                <li><a href="../classes/IBMCore.namespace.html">IBMCore.namespace</a></li>
                                <li><a href="../classes/IBMCore.www.module.dynamiccontactmodule.html">IBMCore.www.module.dynamiccontactmodule</a></li>
                                <li><a href="../classes/IBMCore.www.module.truste.html">IBMCore.www.module.truste</a></li>
                                <li><a href="../classes/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../classes/jQuery.fn.dataTable.html">jQuery.fn.dataTable</a></li>
                                <li><a href="../classes/jQuery.fn.slick.html">jQuery.fn.slick</a></li>
                                <li><a href="../classes/jQuery.layout.html">jQuery.layout</a></li>
                                <li><a href="../classes/jQuery.os.html">jQuery.os</a></li>
                                <li><a href="../classes/jQuery:focusable.html">jQuery:focusable</a></li>
                                <li><a href="../classes/Masonry.html">Masonry</a></li>
                                <li><a href="../classes/Modernizr.html">Modernizr</a></li>
                                <li><a href="../classes/Mustache.html">Mustache</a></li>
                                <li><a href="../classes/NanoScroll.html">NanoScroll</a></li>
                                <li><a href="../classes/Other IBM - Canada notice loader.html">Other IBM - Canada notice loader</a></li>
                                <li><a href="../classes/Other IBM - common init.html">Other IBM - common init</a></li>
                                <li><a href="../classes/Other IBM - common v18 page tracker.html">Other IBM - common v18 page tracker</a></li>
                                <li><a href="../classes/Other IBM - errorchecking.html">Other IBM - errorchecking</a></li>
                                <li><a href="../classes/Other IBM - footer feedback link.html">Other IBM - footer feedback link</a></li>
                                <li><a href="../classes/Other IBM - grid change.html">Other IBM - grid change</a></li>
                                <li><a href="../classes/Other IBM - jstimer-end.html">Other IBM - jstimer-end</a></li>
                                <li><a href="../classes/Other IBM - jstimer-start.html">Other IBM - jstimer-start</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/IBMCore.html">IBMCore</a></li>
                                <li><a href="../modules/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../modules/jQuery.dataTable.html">jQuery.dataTable</a></li>
                                <li><a href="../modules/jQuery.slick.html">jQuery.slick</a></li>
                                <li><a href="../modules/Masonry.html">Masonry</a></li>
                                <li><a href="../modules/Modernizr.html">Modernizr</a></li>
                                <li><a href="../modules/Mustache.html">Mustache</a></li>
                                <li><a href="../modules/Nanoscroller.html">Nanoscroller</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4"style="float: left;width:75%;">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected" checked>
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private" checked>
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated" checked>
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/sources/ibm/common/widgets/videoplayer-ustream.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                        
                        	Ustream video widget.
                        	&lt;br&gt;Dependency: videoplayer.js
                        	&lt;br&gt;The &lt;a href=&quot;IBMCore.common.widget.videoplayer.html&quot;&gt;videoplayer.js&lt;/a&gt; is the main controller that creates the proper object and setup.
                        	&lt;br&gt;This is the video player sub-class for the Ustream embedded video player object.
                        	&lt;br&gt;
                        	&lt;br&gt;__Event usage__: Subscribe to the IBM widget init event that fires on your DOM element to know when the widget has been initialized and you can access its APIs.
                        
                        	@class IBMCore.common.widget.videoplayer.ustream
                        		
                        **/
                        
                        /**
                        	Notes: 
                        	
                        	Ustream video player widget subclass.
                        	
                        	Dependency: videoplayer.js
                        	
                        	Documentation: 
                        		http://developers.ustream.tv/player-api/player.html
                        
                        	API required:
                        		http://static.ustream.tv/js/libs/ustream-embedapi.min.js
                        
                        	Example iframe:
                        		&lt;iframe id=&quot;UstreamIframe&quot; src=&quot;//www.ustream.tv/embed/1524&quot; width=&quot;640&quot; height=&quot;480&quot; allowfullscreen webkitallowfullscreen&gt;&lt;/iframe&gt;
                        
                        	Process flow:
                        		For each DOM element that has data-widget=video and is ustream, one of these object is created 
                        		  and attached to it via: $EL.data(&quot;widget&quot;).player
                        		  
                        		After the new object is created, .init() is run. Init loads the YT api if it doesn&#x27;t exist already (glob var), 
                        		   and then creates the video players for inline and overlay players.
                        		Each video player creates a new YT player object, which injects a YT iframe and replaces the $EL that was tagged for a video widget and the rest is history.
                        		If the player is in an overlay, we do an extra step (before) and create an overlay, inject it, then embed the YT Player in the overlay.
                        
                        **/
                        
                        (function($, IBM) {
                        
                        	var ibmUstream = IBM.namespace(IBM, &#x27;common.widget.videoplayer.ustream&#x27;);
                        
                        	/**
                        		Published on widget&#x27;s DOM element after Ustream placeholder trigger is clicked and video player is injected.
                        		&lt;br&gt;&lt;strong&gt;Example usage&lt;/strong&gt;:
                        		&lt;pre&gt;
                        			jQuery(&quot;&amp;lt;your_widget_selector&gt;&quot;)[0].addEventListener(&quot;ibm-init&quot;, function (evt) {
                        			    // Ustream player widget is embedded and API is available.
                        			});
                        		&lt;/pre&gt;
                        		
                        		@event ibm-init
                        	**/
                        	/**
                        		Player contructor object for the Ustream video player. 
                        		&lt;br /&gt;Dependency: videoplayer.js
                        		&lt;br /&gt;Used by the video player factory in videoplayer.js file, which is used by the jQuery plug-in.
                        		&lt;br /&gt;You can&#x27;t use this directly. Use the standard jQuery(xxxx).videoplayer() plug-in method to create a video player.
                        
                        		@method Player
                        		@constructor
                        		@param [settings] {Object} Settings to override defaults and element&#x27;s @data-xxxx attributes.
                        		@example
                        			// You can access your widget object that was created (this) using the standard convention:
                        			jQuery(&quot;&lt;your_player_container_selector&gt;&quot;).data(&quot;widget&quot;);
                        	**/
                        	ibmUstream.Player = function (userSettings) {
                        		var me = this,
                        			ibmVp = IBM.common.widget.videoplayer,
                        			appliedSettings = {},
                        			defaults = {
                        				settings: {  // Make lowercase so they can be easily overridden by @data-attr.
                        					autoplay: false,
                        					customplaceholder: false,
                        					overlayclasses: &quot;ibm-common-overlay ibm-overlay-alt&quot;,
                        					overlayplayerwidth: 554,
                        					overlayplayersize: &quot;medium&quot;, // &quot;medium&quot; is the preset for the above overlay params
                        					recorded: false,
                        					showimageplaybutton: true,
                        					showtitle: true,
                        					videodisplay: &quot;inline&quot;,
                        					videoid: &quot;&quot;
                        				}
                        			},
                        			lastEvent,
                        			playerPlaceholderClass = &quot;ibm-video-placeholder&quot;;
                        
                        		// &quot;userSettings&quot; came in from videoplayer.js factory and include all element&#x27;s @data-attrs and parent defaults.
                        		// Merge in the user&#x27;s settings and overwrite any defaults and update appliedSettings.
                        		$.extend(true, appliedSettings, defaults.settings, userSettings);
                        
                        		appliedSettings.id = appliedSettings.origEl.id || IBM.common.util.generateId();
                        		appliedSettings.$origEl = $(appliedSettings.origEl);
                        		appliedSettings.$restoreEl = appliedSettings.$origEl.clone(true);
                        
                        		// Make the vars and settings public to this object instace so they can be seen and used.
                        		// We use all local vars for these, so try not to change settings after this point else 
                        		//   the public values will be different.
                        		me.appliedSettings = appliedSettings;
                        
                        		me.player = {status: &quot;uStream player not created yet&quot;};
                        
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br /&gt;Destroys the widget and puts back the original HTML element that existed before the widget initialized.
                        			
                        			@method Player.destroy
                        			@return {jQuery/DOM element} The original element that was put back (that you called widget destroy on).
                        		**/
                        		me.destroy = function () {
                        			if (me.overlay) {
                        				me.overlay.destroy();
                        			}
                        
                        			appliedSettings.$origEl.replaceWith(appliedSettings.$restoreEl);
                        
                        			return appliedSettings.$restoreEl;
                        		};
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Called by videoplayer.js jQuery plugin after the factory returns a player object (an instance of this &quot;Player&quot; object).
                        			&lt;br /&gt;If YT API doesn&#x27;t exist on the page already; include it, wait for it to be available, then create this player widget.
                        			&lt;br /&gt;Else if we&#x27;ve already included the API, create this player widget.
                        
                        			@method Player.init
                        		**/
                        		me.init = init;
                        		function init () {
                        			setupPlayerWidget();
                        		}
                        
                        
                        		/**
                        			EVENTS functions (for metrics).
                        		************************************************************************************************************/
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Fires a metrics event when this video player state changes (hits play, pause, ended, etc).
                        			&lt;br /&gt;States are only played: true | false.
                        			
                        			@method Player.onPlayerStateChange
                        			@private
                        			@param event {Object} The player state change event object.
                        			@param isPlaying {Integer} A code from the Ustream player passed to us.
                        		**/
                        		function onPlayerStateChange (eventName, isPlaying) {
                        			// The player is crap and fires 2-3 events for each state change of playing: true|false event. 
                        			//  So we have to keep track so we don&#x27;t fire multiple metrics for a single player state change.
                        			if (lastEvent === isPlaying) {
                        				return;
                        			}
                        
                        			// Store this event so we don&#x27;t fire multiple metrics events for a single state change in a row.
                        			lastEvent = isPlaying;
                        
                        			var eventData = {
                        					playerType: &quot;ustream&quot;,
                        					title: me.appliedSettings.videoid,
                        					currentTime: 0,
                        					duration: 0,
                        					playerState: (isPlaying ? 2 : 1),
                        					videoId: me.appliedSettings.videoid
                        				};
                        
                        			// Get any custom ibmevent tagging on the element to pass to the event fire.
                        			eventData.customMetricsData = IBM.common.util.statshelper.getCustomEventParams(appliedSettings.$origEl);
                        
                        			ibmVp.fireVideoEvent(eventData);
                        		}
                        
                        
                        		/**
                        			WIDGET functions.
                        		************************************************************************************************************/
                        
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Player and the overlay
                        			&lt;br&gt;Takes the @data-overlayplayersize and converts that preset to the proper width and classes needed for the 
                        			&lt;br /&gt;Optional based on embed settings.
                        
                        			@method Player.setOverlayPresets
                        			@private
                        		**/
                        		function setOverlayPresets () {
                        			if (appliedSettings.overlayplayersize === &quot;large&quot;) {
                        				appliedSettings.overlayclasses = &quot;ibm-common-overlay ibm-overlay-alt-two&quot;;
                        			}
                        			else if (appliedSettings.overlayplayersize === &quot;xlarge&quot;) {
                        				appliedSettings.overlayclasses = &quot;ibm-common-overlay ibm-overlay-alt-three&quot;;
                        			}
                        			else {
                        				appliedSettings.overlayclasses = defaults.settings.overlayclasses;
                        			}
                        		}
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Wrap the original element in a div since we REPLACE it with the youtube player and attach the player widget object to it.
                        			&lt;br /&gt;Then embed the video, replacing the original element (that the plugin was called on).
                        
                        			@method Player.createInlinePlayer
                        			@private
                        			@param $el {jQuery DOM selector} The element where we&#x27;re putting the placeholder.
                        		**/
                        		function createInlinePlayer ($el) {
                        			embedVideo($el);  // Uses the DOM el, not the selector.
                        		}
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Take the video ID and get the image.
                        			&lt;br /&gt;Create, bind, and replace origEl innerHTML with: a-&gt;img.
                        			&lt;br /&gt;Onclick of the &lt;a&gt; we injected, embed the video player (and play it).
                        			
                        			@method Player.createPlayerTrigger
                        			@private
                        		**/
                        		function createPlayerTrigger () {
                        			// If they are using a custom placeholder, hotlink it, 
                        			//   else we just embed the player becuase there is no API to get an image.
                        			
                        			if (appliedSettings.customplaceholder) {
                        				me.$trigger = appliedSettings.$origEl.find(&quot;a&quot;);
                        
                        				// Add the class to the trigger.
                        				me.$trigger.addClass(playerPlaceholderClass);
                        
                        				if (appliedSettings.showimageplaybutton) {
                        					addPlaybutton(me.$trigger);
                        				}
                        			}
                        		}
                        
                        		
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Adds the &amp;lt;span&gt; to the placeholder container right before the image which shows the overlay&#x27;d 
                        			 play button on top of whatever image is used.
                        
                        			@method Player.addPlaybutton
                        			@private
                        			@param $triggerLink {jQuery element} The placeholder element in which to add the overlay&#x27;d play button over the image.
                        		**/
                        		function addPlaybutton ($triggerLink) {
                        			$triggerLink.find(&quot;img&quot;).before(&#x27;&lt;span class=&quot;ibm-play-link&quot;&gt;&lt;/span&gt;&#x27;).parent();
                        		}
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Does the actual video player embed.
                        
                        			@method Player.embedVideo
                        			@private
                        			@param $el {jQuery DOM selector} The element where we&#x27;re embedding the video.
                        		**/
                        		function embedVideo ($el) {
                        			var urlparams = &quot;&quot;,
                        				embedUrlBase = &quot;//www.ustream.tv/embed/&quot;;
                        
                        			if (appliedSettings.autoplay) {
                        				urlparams += &quot;&amp;autoplay=true&quot;;
                        			}
                        			if (!appliedSettings.showtitle) {
                        				urlparams += &quot;&amp;showtitle=false&quot;;
                        			}
                        			if (appliedSettings.recorded) {
                        				embedUrlBase += &quot;recorded/&quot;;
                        			}
                        			
                        			var $playerEl = $(&#x27;&lt;div style=&quot;padding-bottom:56.25%; position:relative; display:block; width: 100%&quot;&gt;&lt;iframe src=&quot;&#x27; + embedUrlBase + appliedSettings.videoid + &#x27;?html5ui=1&#x27; + urlparams + &#x27;&quot; width=&quot;100%&quot; height=&quot;100%&quot; frameborder=&quot;0&quot; style=&quot;position:absolute; top:0; left: 0&quot; allowfullscreen webkitallowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;&#x27;);
                        
                        			me.player = window.UstreamEmbed($playerEl.appendTo($el.empty()).children(&quot;iframe&quot;)[0]);
                        
                        			// Bind the events to fire metrics events.
                        			me.player.addListener(&quot;playing&quot;, onPlayerStateChange);
                        		}
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Called onclick of the user&#x27;s link, or the auto-generated image that serves as the overlay trigger. 
                        			&lt;br /&gt;Public method to use to programatically open and play the associated video.
                        
                        			@method Player.showOverlayAndPlay
                        		**/
                        		me.showOverlayAndPlay = showOverlayAndPlay;
                        		function showOverlayAndPlay () {
                        			// Open the overlay for this player object instance.
                        			me.overlay.show();
                        
                        			// If the overlay still has our TMP DIV, it means we haven&#x27;t embedded the player yet, so embed it,
                        			// Else if there&#x27;s no TMP DIV, it means the video is there, so just play it.
                        			// NOTE: HAVE to include &quot;div&quot; in the selector b/c YT copies the ID to the embedded iframe.
                        			if (document.getElementById(appliedSettings.id + &quot;-tmpcon&quot;)) {
                        				appliedSettings.autoplay = true;
                        				embedVideo($(document.getElementById(appliedSettings.id + &quot;-tmpcon&quot;)).parent());
                        			}
                        			else {
                        				setTimeout(function(){
                        					me.playVideo();
                        				}, 300);
                        			}
                        		}
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;This is our Ustream player factory.
                        			&lt;br /&gt;Called by init(). This is like our sub-factory. 
                        			&lt;br /&gt;Based on the display type, it calls the proper functions to make the proper widget elements for that type.
                        			&lt;br /&gt;This is ONLY called after Ustream API is loaded, so assume all APIs are available.
                        
                        			@method Player.setupPlayerWidget
                        			@private
                        		**/
                        		function setupPlayerWidget () {
                        			var playerType = appliedSettings.videodisplay;
                        
                        			if (playerType.indexOf(&quot;carousel-&quot;) === 0) {
                        				playerType = &quot;carousel&quot;;
                        			}
                        
                        			appliedSettings.$origEl.addClass(&quot;ibm-video-player-con&quot;);
                        
                        			switch (playerType) {
                        				case &quot;inline&quot;: 
                        					// We inject an inline player inside the element that initiated the plug-in.
                        
                        					// If using a custom placeholder, convert it so onclick it does the embed and autoplays. 
                        					// Otherwise we just embed right now.
                        					if (appliedSettings.customplaceholder) {
                        						createPlayerTrigger();
                        
                        						// Inject the placeholder INSIDE this element that&#x27;s inside the orig container element. 
                        						// The player object REPLACES this. 
                        						$(&#x27;&lt;div&gt;&lt;/div&gt;&#x27;).appendTo(appliedSettings.$origEl.empty()).html(me.$trigger);
                        
                        						// Bind the trigger to REPLACE the original element (containers the trigger) with an embeded video player.
                        						me.$trigger.click(function (evt) {
                        							evt.preventDefault();
                        							appliedSettings.autoplay = true;
                        							createInlinePlayer($(&quot; &gt; div&quot;, appliedSettings.$origEl));
                        
                        							// Add processed state (class) and fire common init event on the HTML element.
                        							IBM.common.widget.manager.dispatchInitEvent(appliedSettings.$origEl[0]);							
                        						});
                        					}
                        					else {
                        						createInlinePlayer(appliedSettings.$origEl);
                        
                        						// Add processed state (class) and fire common init event on the HTML element.
                        						IBM.common.widget.manager.dispatchInitEvent(appliedSettings.$origEl[0]);						
                        					}
                        
                        					if (appliedSettings.autoplay) {
                        						me.$trigger.trigger(&quot;click&quot;);
                        					}
                        
                        					break;
                        
                        				case &quot;overlay&quot;: 
                        					// We make ONLY the overlay here.
                        					// The trigger is the element they put the widget on. It has to be on the link.
                        
                        					// Set the overlay and video embed width/heigt from the preset used.
                        					setOverlayPresets();
                        
                        					// Make overlay and attach to this object.
                        					me.overlay = ibmVp.createOverlay(appliedSettings);
                        					me.overlay.setHtml(&#x27;&lt;div id=&quot;&#x27; + appliedSettings.id + &#x27;-tmpcon&quot;&gt;&lt;/div&gt;&#x27;);
                        					
                        					// If they explicitely said to show the play button on their implied custom trigger (use userSettings),
                        					//  add the play button class and span.
                        					if (userSettings.showimageplaybutton) {
                        						appliedSettings.$origEl.addClass(playerPlaceholderClass);
                        						addPlaybutton(appliedSettings.$origEl);
                        					}
                        
                        					// Bind the element (usually an &lt;a&gt; but can technically be anything) that was init via the plugin to open overlay.
                        					appliedSettings.$origEl.click(function (evt) {
                        						evt.preventDefault();
                        						showOverlayAndPlay();
                        						
                        						// Add processed state (class) and fire common init event on the HTML element.
                        						IBM.common.widget.manager.dispatchInitEvent(appliedSettings.$origEl[0]);
                        					});
                        
                        					// Bind the video to pause if the overlay is closed.
                        					me.overlay.subscribe(&quot;hide&quot;, &quot;Videoplayer&quot;, function(){
                        						me.pauseVideo();
                        					});
                        
                        					break;
                        
                        				default: 
                        					IBM.common.util.debug.add(&quot;log&quot;, [&quot;Video player display type unknown: &quot;, appliedSettings.$origEl]);
                        			}
                        		}
                        
                        		/**
                        			Map common player actions to an abstracted API for cross-player ease of use.
                        			Safety check to make sure the lower level function is there before calling it.
                        			&quot;me&quot; here is == $el.data(&quot;widget&quot;)
                        			So &quot;me.playVideo&quot; here is letting the page JS say:  $(&quot;widgetContainer&quot;).data(&quot;widget&quot;).playVideo();
                        		**/
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;This plays the video.
                        
                        			@method Player.playVideo
                        			@example
                        				jQuery(&quot;&lt;your_video_container_selector&gt;&quot;).data(&quot;widget&quot;).playVideo();
                        		**/
                        		me.playVideo = function () {
                        			if (me.player.callMethod) {
                        				me.player.callMethod(&quot;play&quot;);
                        			}
                        		};
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;This plays the video starting at a specific point on the timeline (# of seconds).
                        
                        			@method Player.playVideoAt
                        			@param timesec {String} The time, in seconds, where to seek to and play the video.
                        			@example
                        				jQuery(&quot;&lt;your_video_container_selector&gt;&quot;).data(&quot;widget&quot;).playVideoAt();
                        		**/
                        		me.playVideoAt = function (timesec) {
                        			if (me.player.callMethod) {
                        				me.player.callMethod(&quot;seek&quot;, timesec);
                        			}
                        		};
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;This pauses the video.
                        
                        			@method Player.pauseVideo
                        			@example
                        				jQuery(&quot;&lt;your_video_container_selector&gt;&quot;).data(&quot;widget&quot;).pauseVideo();
                        		**/
                        		me.pauseVideo = function () {
                        			if (me.player.callMethod) {
                        				me.player.callMethod(&quot;pause&quot;);
                        			}
                        		};
                        
                        		/**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;This stops the video.
                        
                        			@method Player.stopVideo
                        			@example
                        				jQuery(&quot;&lt;your_video_container_selector&gt;&quot;).data(&quot;widget&quot;).stopVideo();
                        		**/
                        		me.stopVideo = function () {
                        			if (me.player.callMethod) {
                        				me.player.callMethod(&quot;stop&quot;);
                        			}
                        		};
                        	};
                        
                        
                        })(jQuery, IBMCore);
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
