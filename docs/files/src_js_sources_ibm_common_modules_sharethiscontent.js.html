<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index,follow">
    <title>src/js/sources/ibm/common/modules/sharethiscontent.js - IBM v18 (Northstar) common Javascript documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" href="http://www.ibm.com/favicon.ico">
    <script>
        digitalData = {
            page: {
                pageInfo: {
                    effectiveDate: '2017-02-25',
                    expiryDate: '2020-02-25',
                    language: 'en-US',
                    publishDate: '2017-02-25',
                    publisher: 'IBM Corporation',
                    ibm: {
                        contentDelivery: 'yuidoc via grunt',
                        contentProducer: 'Michael Santelia',
                        country: 'US',
                        owner: 'Michael Santelia'
                    }
                }
            }
        };
    </script>

    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>

    <script>

		var lastUpdate = new Date(document.lastModified),
			updatedMonth = lastUpdate.getMonth(),
			updatedDate = lastUpdate.getDate(),
			updatedYear = lastUpdate.getFullYear(),
			today = new Date(),
			todayMonth = today.getMonth(),
			todayDate = today.getDate(),
			todayYear = today.getFullYear(),
			monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"],
			lastUpdatedText = "",
			daysAgo = Math.floor((today - lastUpdate) / (1000*60*60*24));

		updatedMonthName = monthNames[updatedMonth];

		switch (daysAgo) {

			case 1: 
				lastUpdatedText = "Updated yesterday";
				break;
				
			case 0: 
				lastUpdatedText = "Updated today";
				break;
				
			default: 
				lastUpdatedText = "Updated " + daysAgo + " days ago";
				break;
		}

		if (daysAgo > 4) {
			lastUpdatedText = "Updated: " + updatedMonthName + " " + updatedDate + ", " + updatedYear;
		}

    </script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-1-2">
            <div style="background: url(http://1.www.s81c.com/i/v17/t/ibm-logo.png) no-repeat scroll 0px 0px transparent; width: 105px; height: 45px; margin: 0.85em 0px;text-indent:-9999px;">IBM v18 (Northstar) common Javascript documentation</div>
        </div>
        <div class="yui3-u-1-2 version">
            <em>Javascript documentation for: IBM v18 (Northstar)<br />
            	<span style="font-size: 0.6em; position: absolute; right: 35px;"><script>document.writeln(lastUpdatedText)</script></span></em>
        </div>
    </div>
    
    <p><a href="../assets../../v18-js-source-documentation.zip" style="margin-left: 10px; padding-left: 15px; background: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_transactional_blue_ON.png) no-repeat 0 -202px;">Download a copy of this documentation (ZIP).</a></p>
    
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4" style="float: left;width:25%;">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/IBMCore.common.module.backtotop.html">IBMCore.common.module.backtotop</a></li>
                                <li><a href="../classes/IBMCore.common.module.canadanotice.html">IBMCore.common.module.canadanotice</a></li>
                                <li><a href="../classes/IBMCore.common.module.contactmodule.html">IBMCore.common.module.contactmodule</a></li>
                                <li><a href="../classes/IBMCore.common.module.footer.html">IBMCore.common.module.footer</a></li>
                                <li><a href="../classes/IBMCore.common.module.footermenu.html">IBMCore.common.module.footermenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.leftnav.html">IBMCore.common.module.leftnav</a></li>
                                <li><a href="../classes/IBMCore.common.module.liveperson.html">IBMCore.common.module.liveperson</a></li>
                                <li><a href="../classes/IBMCore.common.module.localeselector.html">IBMCore.common.module.localeselector</a></li>
                                <li><a href="../classes/IBMCore.common.module.localpagenotification.html">IBMCore.common.module.localpagenotification</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.html">IBMCore.common.module.masthead</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.sticky.html">IBMCore.common.module.masthead.sticky</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadbanner.html">IBMCore.common.module.mastheadbanner</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadsearch.html">IBMCore.common.module.mastheadsearch</a></li>
                                <li><a href="../classes/IBMCore.common.module.merchandising.html">IBMCore.common.module.merchandising</a></li>
                                <li><a href="../classes/IBMCore.common.module.mobilemenu.html">IBMCore.common.module.mobilemenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethiscontent.html">IBMCore.common.module.sharethiscontent</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethispage.html">IBMCore.common.module.sharethispage</a></li>
                                <li><a href="../classes/IBMCore.common.module.sitenavmenu.html">IBMCore.common.module.sitenavmenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.urx.html">IBMCore.common.module.urx</a></li>
                                <li><a href="../classes/IBMCore.common.translations.html">IBMCore.common.translations</a></li>
                                <li><a href="../classes/IBMCore.common.util.a11y.html">IBMCore.common.util.a11y</a></li>
                                <li><a href="../classes/IBMCore.common.util.addCssRule.html">IBMCore.common.util.addCssRule</a></li>
                                <li><a href="../classes/IBMCore.common.util.anchorlinkAdjustment.html">IBMCore.common.util.anchorlinkAdjustment</a></li>
                                <li><a href="../classes/IBMCore.common.util.bitly.html">IBMCore.common.util.bitly</a></li>
                                <li><a href="../classes/IBMCore.common.util.color.html">IBMCore.common.util.color</a></li>
                                <li><a href="../classes/IBMCore.common.util.config.html">IBMCore.common.util.config</a></li>
                                <li><a href="../classes/IBMCore.common.util.convertSecondsToHMS.html">IBMCore.common.util.convertSecondsToHMS</a></li>
                                <li><a href="../classes/IBMCore.common.util.cookie.html">IBMCore.common.util.cookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.coreservices.html">IBMCore.common.util.coreservices</a></li>
                                <li><a href="../classes/IBMCore.common.util.data.html">IBMCore.common.util.data</a></li>
                                <li><a href="../classes/IBMCore.common.util.debug.html">IBMCore.common.util.debug</a></li>
                                <li><a href="../classes/IBMCore.common.util.eventCoordinator.html">IBMCore.common.util.eventCoordinator</a></li>
                                <li><a href="../classes/IBMCore.common.util.freezeScrollbars.html">IBMCore.common.util.freezeScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.gatekeeper.html">IBMCore.common.util.gatekeeper</a></li>
                                <li><a href="../classes/IBMCore.common.util.generateId.html">IBMCore.common.util.generateId</a></li>
                                <li><a href="../classes/IBMCore.common.util.getCurrentGridSize.html">IBMCore.common.util.getCurrentGridSize</a></li>
                                <li><a href="../classes/IBMCore.common.util.getDataAttributes.html">IBMCore.common.util.getDataAttributes</a></li>
                                <li><a href="../classes/IBMCore.common.util.getScrollbarWidth.html">IBMCore.common.util.getScrollbarWidth</a></li>
                                <li><a href="../classes/IBMCore.common.util.has12grid.html">IBMCore.common.util.has12grid</a></li>
                                <li><a href="../classes/IBMCore.common.util.hasScrollbars.html">IBMCore.common.util.hasScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.meta.html">IBMCore.common.util.meta</a></li>
                                <li><a href="../classes/IBMCore.common.util.perf.html">IBMCore.common.util.perf</a></li>
                                <li><a href="../classes/IBMCore.common.util.queue.html">IBMCore.common.util.queue</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolledintoview.html">IBMCore.common.util.scrolledintoview</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolltracker.html">IBMCore.common.util.scrolltracker</a></li>
                                <li><a href="../classes/IBMCore.common.util.setIpcCookie.html">IBMCore.common.util.setIpcCookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.statshelper.html">IBMCore.common.util.statshelper</a></li>
                                <li><a href="../classes/IBMCore.common.util.storage.html">IBMCore.common.util.storage</a></li>
                                <li><a href="../classes/IBMCore.common.util.string.htmlspecialchars.html">IBMCore.common.util.string.htmlspecialchars</a></li>
                                <li><a href="../classes/IBMCore.common.util.url.html">IBMCore.common.util.url</a></li>
                                <li><a href="../classes/IBMCore.common.util.user.html">IBMCore.common.util.user</a></li>
                                <li><a href="../classes/IBMCore.common.widget.carousel.html">IBMCore.common.widget.carousel</a></li>
                                <li><a href="../classes/IBMCore.common.widget.ccfintercept.html">IBMCore.common.widget.ccfintercept</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datatable.html">IBMCore.common.widget.datatable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datepicker.html">IBMCore.common.widget.datepicker</a></li>
                                <li><a href="../classes/IBMCore.common.widget.dyntabs.html">IBMCore.common.widget.dyntabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.fileinput.html">IBMCore.common.widget.fileinput</a></li>
                                <li><a href="../classes/IBMCore.common.widget.forms.html">IBMCore.common.widget.forms</a></li>
                                <li><a href="../classes/IBMCore.common.widget.formvalidator.html">IBMCore.common.widget.formvalidator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.leavingibm.html">IBMCore.common.widget.leavingibm</a></li>
                                <li><a href="../classes/IBMCore.common.widget.manager.html">IBMCore.common.widget.manager</a></li>
                                <li><a href="../classes/IBMCore.common.widget.masonry.html">IBMCore.common.widget.masonry</a></li>
                                <li><a href="../classes/IBMCore.common.widget.overlay.html">IBMCore.common.widget.overlay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.parallaxscroll.html">IBMCore.common.widget.parallaxscroll</a></li>
                                <li><a href="../classes/IBMCore.common.widget.rssdisplay.html">IBMCore.common.widget.rssdisplay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.scrollable.html">IBMCore.common.widget.scrollable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlist.html">IBMCore.common.widget.selectlist</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlistnav.html">IBMCore.common.widget.selectlistnav</a></li>
                                <li><a href="../classes/IBMCore.common.widget.setsameheight.html">IBMCore.common.widget.setsameheight</a></li>
                                <li><a href="../classes/IBMCore.common.widget.showhide.html">IBMCore.common.widget.showhide</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stepindicator.html">IBMCore.common.widget.stepindicator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stickytabs.html">IBMCore.common.widget.stickytabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.syntaxhighlighter.html">IBMCore.common.widget.syntaxhighlighter</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tablerowselector.html">IBMCore.common.widget.tablerowselector</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tooltip.html">IBMCore.common.widget.tooltip</a></li>
                                <li><a href="../classes/IBMCore.common.widget.twisty.html">IBMCore.common.widget.twisty</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videolooper.html">IBMCore.common.widget.videolooper</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.html">IBMCore.common.widget.videoplayer</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.kaltura.html">IBMCore.common.widget.videoplayer.kaltura</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.ustream.html">IBMCore.common.widget.videoplayer.ustream</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.youtube.html">IBMCore.common.widget.videoplayer.youtube</a></li>
                                <li><a href="../classes/IBMCore.namespace.html">IBMCore.namespace</a></li>
                                <li><a href="../classes/IBMCore.www.module.dynamiccontactmodule.html">IBMCore.www.module.dynamiccontactmodule</a></li>
                                <li><a href="../classes/IBMCore.www.module.truste.html">IBMCore.www.module.truste</a></li>
                                <li><a href="../classes/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../classes/jQuery.fn.dataTable.html">jQuery.fn.dataTable</a></li>
                                <li><a href="../classes/jQuery.fn.slick.html">jQuery.fn.slick</a></li>
                                <li><a href="../classes/jQuery.layout.html">jQuery.layout</a></li>
                                <li><a href="../classes/jQuery.os.html">jQuery.os</a></li>
                                <li><a href="../classes/jQuery:focusable.html">jQuery:focusable</a></li>
                                <li><a href="../classes/Masonry.html">Masonry</a></li>
                                <li><a href="../classes/Modernizr.html">Modernizr</a></li>
                                <li><a href="../classes/Mustache.html">Mustache</a></li>
                                <li><a href="../classes/NanoScroll.html">NanoScroll</a></li>
                                <li><a href="../classes/Other IBM - Canada notice loader.html">Other IBM - Canada notice loader</a></li>
                                <li><a href="../classes/Other IBM - common init.html">Other IBM - common init</a></li>
                                <li><a href="../classes/Other IBM - common v18 page tracker.html">Other IBM - common v18 page tracker</a></li>
                                <li><a href="../classes/Other IBM - errorchecking.html">Other IBM - errorchecking</a></li>
                                <li><a href="../classes/Other IBM - footer feedback link.html">Other IBM - footer feedback link</a></li>
                                <li><a href="../classes/Other IBM - grid change.html">Other IBM - grid change</a></li>
                                <li><a href="../classes/Other IBM - jstimer-end.html">Other IBM - jstimer-end</a></li>
                                <li><a href="../classes/Other IBM - jstimer-start.html">Other IBM - jstimer-start</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/IBMCore.html">IBMCore</a></li>
                                <li><a href="../modules/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../modules/jQuery.dataTable.html">jQuery.dataTable</a></li>
                                <li><a href="../modules/jQuery.slick.html">jQuery.slick</a></li>
                                <li><a href="../modules/Masonry.html">Masonry</a></li>
                                <li><a href="../modules/Modernizr.html">Modernizr</a></li>
                                <li><a href="../modules/Mustache.html">Mustache</a></li>
                                <li><a href="../modules/Nanoscroller.html">Nanoscroller</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4"style="float: left;width:75%;">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected" checked>
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private" checked>
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated" checked>
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/sources/ibm/common/modules/sharethiscontent.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                        
                        	&quot;Share this content&quot; widget.
                        	&lt;br /&gt;
                        	&lt;br /&gt;Disabled by default. To enable it on your page, use the standard config option and add this JS snippet to your page:
                        		
                        		IBMCore.common.util.config.set({
                        			sharethiscontent: { enabled: true }
                        		});
                        
                        	&lt;br&gt;To add a social sharing link for your country&#x27;s page that is country appropriate/specific, set it in the same config option, but in a &quot;links&quot; object, giving it an ID, URL (with substitution holders) and the class to use. Wherever you place the {url} and {text} placholders, the widget will dynamically substitute in the page&#x27;s URL and the user&#x27;s selected text.
                        
                        	&lt;br&gt;&lt;br&gt;Below is a (fake) example:
                        		
                        		IBMCore.common.util.config.set({
                        			sharethiscontent: {
                        				enabled: true,
                        				links: {
                        					bleisbo: {
                        						url: &quot;https://bleisbo.com/share/?url={url}&amp;text={text}&quot;,
                        						linkClass: &quot;ibm-bleisbo-mono-link&quot;
                        					}
                        				}
                        			}
                        		});
                        	
                        	@class IBMCore.common.module.sharethiscontent
                        
                        **/
                        
                        (function ($, IBM) {
                        
                        	/**
                        		Publishes this event after the module has been initialized and is ready.
                        
                        		@event ready
                        	**/
                        	// Create name space for this thing and make a shortcut to it for ourselves.
                        	var me = IBM.namespace(IBM, &quot;common.module.sharethiscontent&quot;), 
                        		myEvents = IBM.common.util.eventCoordinator(me, &quot;sharethiscontent&quot;, [&quot;ready&quot;]),
                        		$tip;
                        
                        
                        	/**
                        		Default standard auto init function.
                        		&lt;br /&gt;Callback from subscription to meta &#x27;dataReady&#x27; event publisher.
                        		&lt;br /&gt;Simply runs init if conditions are met.
                        
                        		@method autoInit
                        	**/
                        	me.autoInit = function () {
                        		if (IBM.common.util.config.isEnabled(&quot;sharethiscontent&quot;)) { 
                        			me.init();
                        		}
                        	};
                        
                        	/**
                        		Creates the dynamic tooltip with social sharing links from default and user-defind config links. Binds content selection
                        		 to show the sharing toolip.
                        		&lt;br /&gt;Called by autoinit if module is enabled.
                        		
                        		@method init
                        	**/
                        	me.init = function () {
                        		var config = {},
                        			defaults = {
                        				links: {
                        					email: {
                        						url: &quot;mailto:?subject={title}&amp;body={text}&quot;,
                        						linkClass: &quot;ibm-email-mono-link&quot;
                        					},
                        					linkedin: {
                        						url: &quot;https://www.linkedin.com/shareArticle?mini=true&amp;url={url}&amp;title={title}&amp;summary={text}&quot;,
                        						linkClass: &quot;ibm-linkedin-mono-link&quot;
                        					},
                        					twitter: {
                        						url: &quot;https://twitter.com/intent/tweet?text={text} {url}&quot;,
                        						linkClass: &quot;ibm-twitter-mono-link&quot;
                        					}
                        				}
                        			};
                        
                        		// Merge in page overrides for what social links to include.
                        		// ADD $links last in list so it&#x27;s not overridable. Just creates container for generated links we make (next).
                        		$.extend(true, config, defaults, IBM.common.util.config.get(&quot;sharethiscontent&quot;), {$links: []});
                        
                        		// Create icon links for each sharable linkage.
                        		$.each(config.links, function (objName, objVal) {
                        			if (objVal) {
                        				objVal.id = objName;
                        				config.$links.push(createLinkEl(objVal));
                        			}
                        		});
                        
                        		// Create tooltip, put links inside and inject to page for use.
                        		createTooltip(config.$links);
                        
                        		// Bind body text selection event to show the tooltip on text selection.
                        		bindTextSelectionSharing();
                        
                        		// Tell subscribers we&#x27;re done.
                        		myEvents.publish(&quot;ready&quot;);
                        	};
                        
                        
                        	/**
                        		Binds mouseup event to look for existing selected text; if exists, shows the &quot;share this&quot; tooltip.
                        		&lt;br&gt;On selection start or mouseup with no selection, it hides the tooltip.
                        
                        		@method bindTextSelectionSharing
                        		@private
                        	**/
                        	function bindTextSelectionSharing () {
                        		var pageContent = document.getElementById(&quot;ibm-content-wrapper&quot;) || document.getElementById(&quot;ibm-pcon&quot;);
                        
                        		$(pageContent).on(&quot;selectstart&quot;, function () {
                        			$tip.addClass(&quot;ibm-hide&quot;);
                        		}).on(&quot;mouseup&quot;, function (evt) {
                        			var tipProps,
                        				tipStyle;
                        			
                        			if (!$(evt.target).is(&quot;a&quot;) &amp;&amp; !$(evt.target).parent().is(&quot;a&quot;)) {
                        				evt.preventDefault();
                        				
                        				if (getSelectionText().length &gt; 1) {
                        					// Default style is put it where the mouse is, at the bottom.
                        					$tip.removeClass(&quot;ibm-hide&quot;);
                        
                        					tipStyle = { 
                        						top: evt.pageY + 20,
                        						left: evt.pageX - ($tip.outerWidth() * 0.5),
                        						right: &quot;auto&quot;
                        					};
                        
                        					// Position it, then eval if we need to move it because of browser edges.
                        					$tip.css(tipStyle);
                        					
                        					// Unhide to get the props then (re)position it.
                        					tipProps = $tip[0].getBoundingClientRect();
                        					
                        					// If it&#x27;s offscreen left, set to left 0.
                        					// else if it&#x27;s offscreen right, set to right 0 (basically).
                        					if (tipStyle.left &lt; 0) {
                        						tipStyle.left = 0;
                        					}
                        					else if ((tipStyle.left + tipProps.width + 40) &gt; window.innerWidth) {
                        						tipStyle.left = &quot;auto&quot;;
                        						tipStyle.right = 0;
                        					}
                        
                        					// If it&#x27;s at the bottom of the screen, move it up and put the tip on the bottom.
                        					if ((tipProps.top + tipProps.height) &gt; window.innerHeight) {
                        						tipStyle.top = tipStyle.top - (tipProps.height + 30);
                        						$tip.css(tipStyle).removeClass(&quot;bottom&quot;).addClass(&quot;top&quot;);
                        					}
                        					else {
                        						$tip.css(tipStyle).addClass(&quot;bottom&quot;).removeClass(&quot;top&quot;);
                        					}
                        
                        					$tip.css(tipStyle);
                        				}
                        				else {
                        					$tip.addClass(&quot;ibm-hide&quot;);
                        				}
                        			}
                        		});
                        	}
                        
                        	/**
                        		Cross-browser method to get text that is currently selected by the user.
                        
                        		@method getSelectionText
                        		@private
                        		@return {String} Text on the page that is currently selected by the user.
                        	**/
                        	function getSelectionText () {
                        		var text = &quot;&quot;;
                        		
                        		if (window.getSelection) {
                        			text = window.getSelection().toString();
                        		}
                        		else if (document.selection &amp;&amp; document.selection.type !== &quot;Control&quot;) {
                        			text = document.selection.createRange().text;
                        		}
                        		
                        		return text;
                        	}
                        
                        	/**
                        		Creates the icon link DOM element (&amp;lt;a&gt;) using the inbound link data object.
                        
                        		@method createLinkEl
                        		@private
                        		@param linkData {Object} The object with link data used to create the icon link element.
                        		@return {DOM element} The link DOM element &amp;lt;a&gt; created.
                        	**/
                        	function createLinkEl (linkData) {
                        		var openWin = linkData.id !== &quot;email&quot; ? &quot;window.open()&quot; : &quot;null&quot;;
                        
                        		// Validation: Only make links from objects that have a URL.
                        		if (!linkData.url || linkData.url === &quot;&quot;) {
                        			return;
                        		}
                        
                        		return $(&quot;&lt;a&gt;&lt;/a&gt;&quot;).attr({
                        				&quot;class&quot;: linkData.linkClass + &quot; ibm-thick-underline&quot;,
                        				&quot;href&quot;: linkData.url,
                        				&quot;data-id&quot;: linkData.id,
                        				&quot;onclick&quot;: &quot;return IBMCore.common.module.sharethiscontent.gotoUrl(&quot; + openWin + &quot;, this);&quot;
                        			}).html(linkData.id);
                        	}
                        	
                        	/**
                        		Creates and injects the tooltip shown when text is selected on the page, with the share links in it.
                        
                        		@method createTooltip
                        		@private
                        		@param $links {Object} Object with dynamically generated icon link DOM elements to add to the tooltip.
                        	**/
                        	function createTooltip ($links) {
                        		$tip = $(document.getElementById(&quot;social-media-share-tooltip-content&quot;));
                        
                        		// If tooltip doesn&#x27;t exist (default) create it.
                        		// Else it already exists (ex: meta locale change/re-init.)
                        		if (!$tip[0]) {
                        			$tip = $(&#x27;&lt;div id=&quot;social-media-share-tooltip-content&quot; class=&quot;tipso_bubble bottom ibm-background-neutral-white-40 ibm-hide&quot;&gt;&lt;div class=&quot;tipso_content&quot;&gt;&lt;div class=&quot;tipso_contents&quot;&gt;&lt;p class=&quot;ibm-icononly&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;tipso_arrow&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
                        		}
                        
                        		// Add icon links.
                        		$tip.find(&quot;.ibm-icononly&quot;).html($links);
                        
                        		// Add full tooltip to body, ready for use.
                        		$tip.appendTo(&quot;body&quot;);
                        	}
                        
                        	/**
                        		Icon links onclick callback. Fires metric event, does bitly shortening, etc.
                        		
                        		@method gotoUrl
                        		@param win {Object} The new window object.
                        		@param el {Object} The icon link element clicked.
                        		@return {Boolean} False, to the link that was clicked so default action doesn&#x27;t happen.
                        	**/
                        	me.gotoUrl = gotoUrl;
                        	function gotoUrl (win, el) {
                        		var linkId = el.getAttribute(&quot;data-id&quot;),
                        			linkUrl = el.href;
                        
                        		// Metrics click tracking.
                        		IBM.common.util.statshelper.fireEvent({
                        			ibmEV : &quot;external link&quot;,
                        			ibmEvAction : linkUrl,
                        			ibmEvGroup : &quot;Share this content icons&quot;,
                        			ibmEvName : &quot;stc-&quot; + linkId
                        		});
                        
                        		// Shorten the page&#x27;s URL and then goto the social sharing property link using it.
                        		IBM.common.util.bitly.shorten({
                        			url: IBM.common.util.url.getUrl(),
                        			success: function (shortUrl) {
                        				// A new window was opened and reference passed to us. Now that we have the shortened page URL,
                        				//  set the location/URL of the new window to the link&#x27;s URL.
                        				// This is the only way cross-browser to open new window with a URL from an async service call.
                        				// Safari does not support window.open from global scope. It can only be called onclick,
                        				//  however the short URL comes from Bitly which is async service call.
                        				// NOTE: The only way to open a new window on mobile is to use target=_blank, but we can&#x27;t use that with async
                        				//  service call to Bitly without some tricks. TBD.
                        
                        				var url = shortUrl;
                        
                        				// If it&#x27;s email link, we don&#x27;t want to open a new window.
                        				if (linkId === &quot;email&quot;) {
                        					url = linkUrl.replace(&quot;{text}&quot;, encodeURIComponent(getSelectionText()) + &quot;%0D%0A%0D%0A&quot; + encodeURIComponent(shortUrl))
                        						.replace(&quot;{title}&quot;, encodeURIComponent($(&quot;title&quot;).text()));
                        					window.location.href = url;
                        				}
                        				else {
                        					url = linkUrl.replace(&quot;{text}&quot;,encodeURIComponent(getSelectionText()))
                        					.replace(&quot;{url}&quot;, encodeURIComponent(shortUrl))
                        					.replace(&quot;{title}&quot;, encodeURIComponent($(&quot;title&quot;).text()));
                        
                        					win.location.href = url;
                        				}
                        			}
                        		});
                        		
                        		// Returns false to the link &quot;onclick&quot; attribute so default action doesn&#x27;t happen.
                        		return false;
                        	}
                        
                        
                        	/* Wait for events to happen to init.
                        	**********************************************************************************************/
                        
                        	// When meta is ready, it means all configs have been set (full &lt;head&gt; loaded), so we can check if service is enabled.
                        	IBM.common.meta.subscribe(&quot;dataReady&quot;, &quot;sharethiscontent&quot;, me.autoInit).runAsap(me.autoInit);
                        
                        
                        })(jQuery, IBMCore);
                        
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
