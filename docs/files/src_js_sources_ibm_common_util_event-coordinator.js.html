<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index,follow">
    <title>src/js/sources/ibm/common/util/event-coordinator.js - IBM v18 (Northstar) common Javascript documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" href="http://www.ibm.com/favicon.ico">
    <script>
        digitalData = {
            page: {
                pageInfo: {
                    effectiveDate: '2017-02-25',
                    expiryDate: '2020-02-25',
                    language: 'en-US',
                    publishDate: '2017-02-25',
                    publisher: 'IBM Corporation',
                    ibm: {
                        contentDelivery: 'yuidoc via grunt',
                        contentProducer: 'Michael Santelia',
                        country: 'US',
                        owner: 'Michael Santelia'
                    }
                }
            }
        };
    </script>

    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>

    <script>

		var lastUpdate = new Date(document.lastModified),
			updatedMonth = lastUpdate.getMonth(),
			updatedDate = lastUpdate.getDate(),
			updatedYear = lastUpdate.getFullYear(),
			today = new Date(),
			todayMonth = today.getMonth(),
			todayDate = today.getDate(),
			todayYear = today.getFullYear(),
			monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"],
			lastUpdatedText = "",
			daysAgo = Math.floor((today - lastUpdate) / (1000*60*60*24));

		updatedMonthName = monthNames[updatedMonth];

		switch (daysAgo) {

			case 1: 
				lastUpdatedText = "Updated yesterday";
				break;
				
			case 0: 
				lastUpdatedText = "Updated today";
				break;
				
			default: 
				lastUpdatedText = "Updated " + daysAgo + " days ago";
				break;
		}

		if (daysAgo > 4) {
			lastUpdatedText = "Updated: " + updatedMonthName + " " + updatedDate + ", " + updatedYear;
		}

    </script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-1-2">
            <div style="background: url(http://1.www.s81c.com/i/v17/t/ibm-logo.png) no-repeat scroll 0px 0px transparent; width: 105px; height: 45px; margin: 0.85em 0px;text-indent:-9999px;">IBM v18 (Northstar) common Javascript documentation</div>
        </div>
        <div class="yui3-u-1-2 version">
            <em>Javascript documentation for: IBM v18 (Northstar)<br />
            	<span style="font-size: 0.6em; position: absolute; right: 35px;"><script>document.writeln(lastUpdatedText)</script></span></em>
        </div>
    </div>
    
    <p><a href="../assets../../v18-js-source-documentation.zip" style="margin-left: 10px; padding-left: 15px; background: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_transactional_blue_ON.png) no-repeat 0 -202px;">Download a copy of this documentation (ZIP).</a></p>
    
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4" style="float: left;width:25%;">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/IBMCore.common.module.backtotop.html">IBMCore.common.module.backtotop</a></li>
                                <li><a href="../classes/IBMCore.common.module.canadanotice.html">IBMCore.common.module.canadanotice</a></li>
                                <li><a href="../classes/IBMCore.common.module.contactmodule.html">IBMCore.common.module.contactmodule</a></li>
                                <li><a href="../classes/IBMCore.common.module.footer.html">IBMCore.common.module.footer</a></li>
                                <li><a href="../classes/IBMCore.common.module.footermenu.html">IBMCore.common.module.footermenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.leftnav.html">IBMCore.common.module.leftnav</a></li>
                                <li><a href="../classes/IBMCore.common.module.liveperson.html">IBMCore.common.module.liveperson</a></li>
                                <li><a href="../classes/IBMCore.common.module.localeselector.html">IBMCore.common.module.localeselector</a></li>
                                <li><a href="../classes/IBMCore.common.module.localpagenotification.html">IBMCore.common.module.localpagenotification</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.html">IBMCore.common.module.masthead</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.sticky.html">IBMCore.common.module.masthead.sticky</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadbanner.html">IBMCore.common.module.mastheadbanner</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadsearch.html">IBMCore.common.module.mastheadsearch</a></li>
                                <li><a href="../classes/IBMCore.common.module.merchandising.html">IBMCore.common.module.merchandising</a></li>
                                <li><a href="../classes/IBMCore.common.module.mobilemenu.html">IBMCore.common.module.mobilemenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethiscontent.html">IBMCore.common.module.sharethiscontent</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethispage.html">IBMCore.common.module.sharethispage</a></li>
                                <li><a href="../classes/IBMCore.common.module.sitenavmenu.html">IBMCore.common.module.sitenavmenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.urx.html">IBMCore.common.module.urx</a></li>
                                <li><a href="../classes/IBMCore.common.translations.html">IBMCore.common.translations</a></li>
                                <li><a href="../classes/IBMCore.common.util.a11y.html">IBMCore.common.util.a11y</a></li>
                                <li><a href="../classes/IBMCore.common.util.addCssRule.html">IBMCore.common.util.addCssRule</a></li>
                                <li><a href="../classes/IBMCore.common.util.anchorlinkAdjustment.html">IBMCore.common.util.anchorlinkAdjustment</a></li>
                                <li><a href="../classes/IBMCore.common.util.bitly.html">IBMCore.common.util.bitly</a></li>
                                <li><a href="../classes/IBMCore.common.util.color.html">IBMCore.common.util.color</a></li>
                                <li><a href="../classes/IBMCore.common.util.config.html">IBMCore.common.util.config</a></li>
                                <li><a href="../classes/IBMCore.common.util.convertSecondsToHMS.html">IBMCore.common.util.convertSecondsToHMS</a></li>
                                <li><a href="../classes/IBMCore.common.util.cookie.html">IBMCore.common.util.cookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.coreservices.html">IBMCore.common.util.coreservices</a></li>
                                <li><a href="../classes/IBMCore.common.util.data.html">IBMCore.common.util.data</a></li>
                                <li><a href="../classes/IBMCore.common.util.debug.html">IBMCore.common.util.debug</a></li>
                                <li><a href="../classes/IBMCore.common.util.eventCoordinator.html">IBMCore.common.util.eventCoordinator</a></li>
                                <li><a href="../classes/IBMCore.common.util.freezeScrollbars.html">IBMCore.common.util.freezeScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.gatekeeper.html">IBMCore.common.util.gatekeeper</a></li>
                                <li><a href="../classes/IBMCore.common.util.generateId.html">IBMCore.common.util.generateId</a></li>
                                <li><a href="../classes/IBMCore.common.util.getCurrentGridSize.html">IBMCore.common.util.getCurrentGridSize</a></li>
                                <li><a href="../classes/IBMCore.common.util.getDataAttributes.html">IBMCore.common.util.getDataAttributes</a></li>
                                <li><a href="../classes/IBMCore.common.util.getScrollbarWidth.html">IBMCore.common.util.getScrollbarWidth</a></li>
                                <li><a href="../classes/IBMCore.common.util.has12grid.html">IBMCore.common.util.has12grid</a></li>
                                <li><a href="../classes/IBMCore.common.util.hasScrollbars.html">IBMCore.common.util.hasScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.meta.html">IBMCore.common.util.meta</a></li>
                                <li><a href="../classes/IBMCore.common.util.perf.html">IBMCore.common.util.perf</a></li>
                                <li><a href="../classes/IBMCore.common.util.queue.html">IBMCore.common.util.queue</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolledintoview.html">IBMCore.common.util.scrolledintoview</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolltracker.html">IBMCore.common.util.scrolltracker</a></li>
                                <li><a href="../classes/IBMCore.common.util.setIpcCookie.html">IBMCore.common.util.setIpcCookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.statshelper.html">IBMCore.common.util.statshelper</a></li>
                                <li><a href="../classes/IBMCore.common.util.storage.html">IBMCore.common.util.storage</a></li>
                                <li><a href="../classes/IBMCore.common.util.string.htmlspecialchars.html">IBMCore.common.util.string.htmlspecialchars</a></li>
                                <li><a href="../classes/IBMCore.common.util.url.html">IBMCore.common.util.url</a></li>
                                <li><a href="../classes/IBMCore.common.util.user.html">IBMCore.common.util.user</a></li>
                                <li><a href="../classes/IBMCore.common.widget.carousel.html">IBMCore.common.widget.carousel</a></li>
                                <li><a href="../classes/IBMCore.common.widget.ccfintercept.html">IBMCore.common.widget.ccfintercept</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datatable.html">IBMCore.common.widget.datatable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datepicker.html">IBMCore.common.widget.datepicker</a></li>
                                <li><a href="../classes/IBMCore.common.widget.dyntabs.html">IBMCore.common.widget.dyntabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.fileinput.html">IBMCore.common.widget.fileinput</a></li>
                                <li><a href="../classes/IBMCore.common.widget.forms.html">IBMCore.common.widget.forms</a></li>
                                <li><a href="../classes/IBMCore.common.widget.formvalidator.html">IBMCore.common.widget.formvalidator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.leavingibm.html">IBMCore.common.widget.leavingibm</a></li>
                                <li><a href="../classes/IBMCore.common.widget.manager.html">IBMCore.common.widget.manager</a></li>
                                <li><a href="../classes/IBMCore.common.widget.masonry.html">IBMCore.common.widget.masonry</a></li>
                                <li><a href="../classes/IBMCore.common.widget.overlay.html">IBMCore.common.widget.overlay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.parallaxscroll.html">IBMCore.common.widget.parallaxscroll</a></li>
                                <li><a href="../classes/IBMCore.common.widget.rssdisplay.html">IBMCore.common.widget.rssdisplay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.scrollable.html">IBMCore.common.widget.scrollable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlist.html">IBMCore.common.widget.selectlist</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlistnav.html">IBMCore.common.widget.selectlistnav</a></li>
                                <li><a href="../classes/IBMCore.common.widget.setsameheight.html">IBMCore.common.widget.setsameheight</a></li>
                                <li><a href="../classes/IBMCore.common.widget.showhide.html">IBMCore.common.widget.showhide</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stepindicator.html">IBMCore.common.widget.stepindicator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stickytabs.html">IBMCore.common.widget.stickytabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.syntaxhighlighter.html">IBMCore.common.widget.syntaxhighlighter</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tablerowselector.html">IBMCore.common.widget.tablerowselector</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tooltip.html">IBMCore.common.widget.tooltip</a></li>
                                <li><a href="../classes/IBMCore.common.widget.twisty.html">IBMCore.common.widget.twisty</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videolooper.html">IBMCore.common.widget.videolooper</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.html">IBMCore.common.widget.videoplayer</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.kaltura.html">IBMCore.common.widget.videoplayer.kaltura</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.ustream.html">IBMCore.common.widget.videoplayer.ustream</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.youtube.html">IBMCore.common.widget.videoplayer.youtube</a></li>
                                <li><a href="../classes/IBMCore.namespace.html">IBMCore.namespace</a></li>
                                <li><a href="../classes/IBMCore.www.module.dynamiccontactmodule.html">IBMCore.www.module.dynamiccontactmodule</a></li>
                                <li><a href="../classes/IBMCore.www.module.truste.html">IBMCore.www.module.truste</a></li>
                                <li><a href="../classes/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../classes/jQuery.fn.dataTable.html">jQuery.fn.dataTable</a></li>
                                <li><a href="../classes/jQuery.fn.slick.html">jQuery.fn.slick</a></li>
                                <li><a href="../classes/jQuery.layout.html">jQuery.layout</a></li>
                                <li><a href="../classes/jQuery.os.html">jQuery.os</a></li>
                                <li><a href="../classes/jQuery:focusable.html">jQuery:focusable</a></li>
                                <li><a href="../classes/Masonry.html">Masonry</a></li>
                                <li><a href="../classes/Modernizr.html">Modernizr</a></li>
                                <li><a href="../classes/Mustache.html">Mustache</a></li>
                                <li><a href="../classes/NanoScroll.html">NanoScroll</a></li>
                                <li><a href="../classes/Other IBM - Canada notice loader.html">Other IBM - Canada notice loader</a></li>
                                <li><a href="../classes/Other IBM - common init.html">Other IBM - common init</a></li>
                                <li><a href="../classes/Other IBM - common v18 page tracker.html">Other IBM - common v18 page tracker</a></li>
                                <li><a href="../classes/Other IBM - errorchecking.html">Other IBM - errorchecking</a></li>
                                <li><a href="../classes/Other IBM - footer feedback link.html">Other IBM - footer feedback link</a></li>
                                <li><a href="../classes/Other IBM - grid change.html">Other IBM - grid change</a></li>
                                <li><a href="../classes/Other IBM - jstimer-end.html">Other IBM - jstimer-end</a></li>
                                <li><a href="../classes/Other IBM - jstimer-start.html">Other IBM - jstimer-start</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/IBMCore.html">IBMCore</a></li>
                                <li><a href="../modules/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../modules/jQuery.dataTable.html">jQuery.dataTable</a></li>
                                <li><a href="../modules/jQuery.slick.html">jQuery.slick</a></li>
                                <li><a href="../modules/Masonry.html">Masonry</a></li>
                                <li><a href="../modules/Modernizr.html">Modernizr</a></li>
                                <li><a href="../modules/Mustache.html">Mustache</a></li>
                                <li><a href="../modules/Nanoscroller.html">Nanoscroller</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4"style="float: left;width:75%;">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected" checked>
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private" checked>
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated" checked>
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/sources/ibm/common/util/event-coordinator.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                        
                        	Publish/subscribe messaging utility. 
                        	&lt;br /&gt;
                        	&lt;br /&gt;An event messaging utility that allows owners to publish messages that any other script can subscribe to and be notified when they happen. The event coordinator performs a store and forward function to route messages from publishers to subscribers.
                        	&lt;br /&gt;A &quot;notify me when ____ happens&quot; utility that provides a far more efficient way to know when events happen, rather than setting up a listener loop and continuously polling to see if something happened yet. For example... instead of asking your dad &quot;are we there yet?&quot; every 5 minutes on a 2 hour drive, you say &quot;tell me when we&#x27;re there.&quot;
                        	&lt;br /&gt;
                        	&lt;br /&gt;Usage:
                        		
                        		// Setup events to publish and let other code subscribe to.
                        		myEvents = IBMCore.common.util.eventCoordinator(myPublicObject &quot;my nice name&quot;, [
                        			&quot;ready&quot;,
                        			&quot;loading&quot;,
                        			&quot;error&quot;
                        		]);
                        		
                        		// Publish an event.
                        		myEvents.publish(&quot;ready&quot;);
                        		
                        		// Subscribe to someone&#x27;s event:
                        		someoneElsesPublicObject.subscribe(&quot;ready&quot;, &quot;my name&quot;, myCallbackFunctionName);
                        
                        	@class IBMCore.common.util.eventCoordinator
                        
                        **/
                        
                        (function (IBM) {
                        
                        	var stop_propagation = false;
                        
                        	/**
                        		The main utility that creates your events messaging system for your class/object/code.
                        		
                        		@method eventCoordinator 
                        		@param obj {Object} Your object which you are setting up events for. It gets pub/sub object and methods merged into it.
                        		@param className {String} The nice-name of your object. Used for debugging purposes.
                        		@param eventNames {Array} An array of names of events (strings) you will publish, and to which other JS can subscribe to.
                        		@return {Object} A new EventsCoordinator object with all messaging and methods setup for the named events.
                        	**/
                        	IBM.common.util.eventCoordinator = function (obj, className, eventNames) {
                        		return new EventsCoordinator(obj, className, eventNames);
                        	};
                        
                        	/**
                        		This is the actual internal class constructor that the public utility abstracts.
                        		
                        		@method EventsCoordinator
                        		@constructor
                        		@private
                        	**/
                        	function EventsCoordinator(that, class_name, event_names) {
                        		var me = this,
                        			handlers = {},
                        			run_now = null,
                        			instance_name = null,
                        			i,
                        			len = event_names.length;
                        			
                        		for (i = 0; i &lt; len; i++) {
                        			handlers[event_names[i].toLowerCase()] = new EventHandler(that, event_names[i].toLowerCase());
                        		}
                        
                        		me.handlers = function () {
                        			return handlers;
                        		};
                        
                        		/**
                        			Internal utility. Used to merge pub/sub events into the object that owns the events we&#x27;re setting up.
                        
                        			@method mergeWith
                        			@param obj {Object} The event owning object to merge the pub/sub methods into.
                        		**/
                        		me.mergeWith = function (obj) {
                        			run_now = null;
                        
                        			var merge_methods = [
                        					&quot;subscribe&quot;,
                        					&quot;unsubscribe&quot;,
                        					&quot;resumeSubscription&quot;,
                        					&quot;pauseSubscription&quot;,
                        					&quot;publish&quot;,
                        					&quot;handlers&quot;,
                        					&quot;stopPropagation&quot;],
                        				i,
                        				len = merge_methods.length,
                        				method;
                        
                        			for (i = 0; i &lt; len; i++) {
                        				method = merge_methods[i];
                        				if (typeof(that[method]) === &quot;undefined&quot;) {
                        					that[method] = me[method];
                        				}
                        				else {
                        					window.console.warn(&quot;Cannot merge event handler method &#x27;&quot; + method + &quot;&#x27; for &quot; + that.toString() + &quot;.&quot;);
                        				}
                        			}
                        
                        			that.instanceName = function (new_name) {
                        				if (arguments.length === 0) {
                        					return instance_name;
                        				}
                        
                        				instance_name = new_name;
                        			};
                        
                        			that.toString = function () {
                        				if (instance_name) {
                        					return (&quot;[ {{class_name}}: {{instance_name}} ]&quot;)
                        						.replace(&quot;{{class_name}}&quot;, class_name)
                        						.replace(&quot;{{instance_name}}&quot;, instance_name);
                        				}
                        
                        				return (&quot;[ {{class_name}} ]&quot;).replace(&quot;{{class_name}}&quot;, class_name);
                        			};
                        
                        			that.event_coordinator = me;
                        		};
                        
                        		/**
                        			Subscribe to the object&#x27;s event and be notified when it happens (runs callback function.)
                        
                        			@method subscribe
                        			@param event_name {String} The name of the owning object&#x27;s event to subscribe to.  
                        			@param owner {String} The name of your code/object that&#x27;s subscribing. (Same name is used for unsubscribing.)
                        			@param fn {Function} The function to call when the event happens.
                        			@param [prepend] {Boolean} Set to true if you have multiple subscriptions to the same event and you want this one prepended to the event&#x27;s callback array.
                        			@return {Object} Returns your event coordinator object.
                        			@example
                        				IBMCore.common.module.masthead.subscribe(&quot;ready&quot;, &quot;my name&quot;, myCallbackFunctionName);
                        		**/
                        		me.subscribe = subscribe;
                        		function subscribe(event_name, owner, fn, prepend) {
                        			run_now = null; // overwritten later
                        
                        			if (typeof owner === &quot;undefined&quot;) {
                        				window.console.warn(&quot;Cannot call on() with an undefined owner.&quot;);
                        				return me;
                        			}
                        
                        			var handler = handlers[event_name.toLowerCase()];
                        			if (handler) {
                        				handler.add(owner, fn, prepend);
                        			}
                        			else {
                        				window.console.warn(&quot;on() - No event name found: &quot; + event_name);
                        			}
                        
                        			run_now = {
                        				fn : fn,
                        				owner : owner,
                        				event_name : event_name
                        			};
                        
                        			return me;
                        		}
                        
                        		/**
                        			Unsubscribe from the object&#x27;s event.
                        
                        			@method unsubscribe
                        			@param event_name {String} The name of the event to unsubscribe to.
                        			@param owner {String} The name of your code/object that&#x27;s unsubscribing. (Same name is used for subscribing.)
                        			@return {Object} Returns your event coordinator object.
                        			@example
                        				IBMCore.common.module.masthead.unsubscribe(&quot;ready&quot;, &quot;my name&quot;);
                        		**/
                        		me.unsubscribe = unsubscribe;
                        		function unsubscribe(event_name, owner) {
                        			run_now = null;
                        
                        			if (typeof event_name === &quot;undefined&quot;) {
                        				window.console.warn(&quot;Cannot call unsubscribe() with an undefined event_name.&quot;);
                        				return me;
                        			}
                        
                        			var handler = handlers[event_name.toLowerCase()];
                        			if (owner) {
                        				handler.remove(owner);
                        			}
                        			else {
                        				//window.console.warn(&quot;unsubscribe() - No event name found: &quot; + event_name);
                        				handler.reset();
                        			}
                        
                        			return me;
                        		}
                        
                        		/**
                        			Resume a paused subscription.
                        
                        			@method resumeSubscription
                        			@param event_name {String} The name of the event to resume the subscription for.
                        			@param owner {String} The name of your code/object that&#x27;s resuming the subscription for (same name is used for subscribing.)
                        			@return {Object} Returns your event coordinator object.
                        			@example
                        				IBMCore.common.module.masthead.resumeSubscription(&quot;ready&quot;, &quot;my name&quot;);
                        		**/
                        		me.resumeSubscription = resumeSubscription;
                        		function resumeSubscription(event_name, owner) {
                        			run_now = null;
                        
                        			if (typeof event_name === &quot;undefined&quot;) {
                        				window.console.warn(&quot;Cannot call resumeSubscription() with an undefined event_name.&quot;);
                        				return me;
                        			}
                        
                        			var handler = handlers[event_name.toLowerCase()];
                        			if (handler) {
                        				if (typeof owner !== &quot;undefined&quot;) {
                        					handler.resumeSubscription(owner);
                        				}
                        				else {
                        					handler.resumeAllSubscriptions();
                        				}
                        			}
                        			else {
                        				window.console.warn(&quot;resumeSubscription() - No event name found: &quot; + event_name);
                        			}
                        
                        			return me;
                        		}
                        
                        		/**
                        			Temporarily pause a subscription.
                        
                        			@method pauseSubscription
                        			@param event_name {String} The name of the event to pause the subscription for.
                        			@param owner {String} The name of your code/object that&#x27;s pausing the subscription for (same name is used for subscribing.)
                        			@return {Object} Returns your event coordinator object.
                        			@example
                        				IBMCore.common.module.masthead.pauseSubscription(&quot;ready&quot;, &quot;my name&quot;);
                        		**/
                        		me.pauseSubscription = pauseSubscription;
                        		function pauseSubscription(event_name, owner) {
                        			run_now = null;
                        
                        			if (typeof event_name === &quot;undefined&quot;) {
                        				window.console.warn(&quot;Cannot call pauseSubscription() with an undefined event_name.&quot;);
                        				return me;
                        			}
                        
                        			var handler = handlers[event_name.toLowerCase()];
                        			if (handler) {
                        				if (typeof owner !== &quot;undefined&quot;) {
                        					handler.pauseSubscription(owner);
                        				}
                        				else {
                        					handler.pauseAllSubscriptions();
                        				}
                        			}
                        			else {
                        				window.console.warn(&quot;pauseSubscription() - No event name found: &quot; + event_name);
                        			}
                        
                        			return me;
                        		}
                        
                        		/**
                        			Publish an event. Anyone subscribed to the named event will get their callback function run.
                        
                        			@method publish
                        			@param event_name {String} The name of the event to publish.
                        			@return {Object} Returns your event coordinator object.
                        			@example
                        				myEvents.publish(&quot;ready&quot;);
                        		**/
                        		me.publish = publish;
                        		function publish(event_name) {
                        			run_now = null;
                        
                        			if (typeof event_name === &quot;undefined&quot;) {
                        				window.console.warn(&quot;Cannot call publish() with an undefined event_name.&quot;);
                        				return me;
                        			}
                        
                        			var handler = handlers[event_name.toLowerCase()],
                        				active_owners;
                        				
                        			if (handler) {
                        				active_owners = handler.activeOwners();
                        				if (active_owners.length &gt; 0) {
                        					//window.console.groupCollapsed(that.toString() + &quot; publishing event \&quot;&quot; + event_name + &quot;\&quot; [&quot; + active_owners.join(&quot;,&quot;) + &quot;]&quot;);
                        					
                        					switch (arguments.length) {
                        						case 1:
                        							handler.publish();
                        							break;
                        						case 2:
                        							handler.publish(arguments[1]);
                        							break;
                        					}
                        					
                        					//window.console.groupEnd();
                        				}
                        			}
                        			else {
                        				window.console.warn(&quot;publish() - No event name found: &quot; + event_name);
                        			}
                        
                        			return me;
                        		}
                        
                        		/**
                        			Stops event publishing propagation.
                        
                        			@method stopPropagation
                        			@deprecated
                        		**/
                        		me.stopPropagation = stopPropagation;
                        		function stopPropagation() {
                        			stop_propagation = true;
                        		}
                        
                        		/**
                        			Internal utility. This is what actually runs the callback function.
                        
                        			@method runNow
                        		**/
                        		me.runNow = runNow;
                        		function runNow() {
                        			if (run_now) {
                        				//window.console.groupCollapsed(&quot;Publishing event &#x27;&quot; + run_now.event_name + &quot;&#x27; now for &#x27;&quot; + run_now.owner + &quot;&#x27; via runNow()&quot;);
                        				
                        				try {
                        					switch (arguments.length) {
                        						case 0:
                        							run_now.fn.call(that);
                        							break;
                        						case 1:
                        							run_now.fn.call(that, arguments[0]);
                        							break;
                        						case 2:
                        							run_now.fn.call(that, arguments[0], arguments[1]);
                        							break;
                        					}
                        				}
                        				catch (er) {
                        					window.console.warn(&quot;The [&quot; + run_now.owner + &quot;] subscription to the &quot; + that + &quot;[&quot; + run_now.event_name + &quot;] event failed with error:&quot;);
                        					window.console.error(er);
                        				}
                        				
                        				//window.console.groupEnd();
                        			}
                        		}
                        
                        		/**
                        			Runs the named callback function if the event you&#x27;re subscribing to has already happened. Use in conjunction with .subscribe() in cases where you&#x27;re not sure if the event will happen before your code runs.
                        
                        			@method runAsap
                        			@example 
                        				// When translations (from service) are ready, call my custom function, or call immediately if already ready.
                        				// Translations can be cached so we need to use runAsap() also.
                        				IBMCore.common.translations.subscribe(&quot;dataReady&quot;, &quot;footermenu&quot;, myCustomFunctionName).runAsap(myCustomFunctionName);
                        		**/
                        		me.runAsap = runAsap;
                        		function runAsap() {
                        			if (run_now) {
                        				var count = handlers[run_now.event_name.toLowerCase()].runCount(); // Everywhere else lowercases the event name.
                        				if (count &gt; 0) {
                        					//window.console.log(&quot;asap count for &#x27;&quot;+run_now.owner+&quot;&#x27; - &#x27;&quot;+run_now.event_name+&quot;&#x27;: &quot; + count + &quot;. Running now.&quot;);
                        					runNow();
                        				}
                        				// else {
                        				// 	window.console.log(&quot;Event &#x27;&quot; + run_now.event_name + &quot;&#x27; for &#x27;&quot; + run_now.owner + &quot;&#x27; will not runNow() because the event has not happened yet. But it has been bound, so will run as soon as the event occurs.&quot;);
                        				// }
                        			}
                        			else {
                        				window.console.warn(&quot;Event &#x27;&quot; + run_now.event_name + &quot;&#x27; for &#x27;&quot; + run_now.owner + &quot; has no function available to run.&quot;);
                        			}
                        		}
                        
                        		me.mergeWith(that);
                        	}
                        
                        	/**
                        		This is the actual internal class constructor that handles the events. Used by EventsCoordinator internal class.
                        		
                        		@method EventHandler
                        		@constructor
                        		@private
                        	**/
                        	function EventHandler(that, name) {
                        		var me = this,
                        			run_count = 0,
                        			remove_count = 0,
                        			active_owners = {},
                        			events = [];
                        
                        		// Returns an array of current active owners.
                        		me.activeOwners = activeOwners;
                        		function activeOwners() {
                        			var ns = [],
                        				key;
                        
                        			for (key in active_owners) {
                        				if (active_owners[key]) {
                        					ns.push(key);
                        				}
                        			}
                        
                        			return ns;
                        		}
                        
                        		me.events = events;
                        
                        		// Returns the # of times an event has been run.
                        		me.runCount = function () {
                        			return run_count;
                        		};
                        
                        		// Adds an owner to the active owner array if not there already then adds the callback to the event queue.
                        		me.add = add;
                        		function add(owner, fn, prepend) {
                        			if (typeof active_owners[owner] === &quot;undefined&quot;) {
                        				active_owners[owner] = true;
                        			}
                        
                        			events[prepend ? &quot;unshift&quot; : &quot;push&quot;]({
                        				owner : owner,
                        				fn : fn,
                        				runs : 0
                        			});
                        		}
                        
                        		// Removes an event subscription for a named owner.
                        		me.remove = remove;
                        		function remove(owner) {
                        			var i = -1;
                        			while (++i &lt; events.length) {
                        				if (events[i].owner === owner) {
                        					events.splice(i, 1);
                        					i--;
                        					remove_count++;
                        					//window.console.log(&quot;Removed &quot; + that + &quot; event &#x27;&quot; + name + &quot;&#x27; for owner &quot; + owner);
                        				}
                        			}
                        		}
                        
                        		// Resets all event props.
                        		me.reset = reset;
                        		function reset() {
                        			run_count = 0;
                        			active_owners = {};
                        			remove_count = events.length;
                        			events = [];
                        		}
                        
                        		// Resume an event subscription for the named subscriber.
                        		me.resumeSubscription = resumeSubscription;
                        		function resumeSubscription(owner) {
                        			if (active_owners[owner]) {
                        				active_owners[owner] = true;
                        			}
                        			else {
                        				window.console.warn(&quot;Cannot resumeSubscription function with an unknown owner: &quot; + name);
                        			}
                        			return me;
                        		}
                        
                        		// Pauses an event subscription for the named subscriber.
                        		me.pauseSubscription = pauseSubscription;
                        		function pauseSubscription(owner) {
                        			if (active_owners[owner]) {
                        				active_owners[owner] = false;
                        			}
                        			else {
                        				window.console.warn(&quot;Cannot pauseSubscription function with an unknown owner: &quot; + name);
                        			}
                        			return me;
                        		}
                        
                        		// Resume an event subscription for the ALL subscribers.
                        		me.resumeAllSubscriptions = resumeAllSubscriptions;
                        		function resumeAllSubscriptions() {
                        			var key;
                        			for (key in active_owners) {
                        				active_owners[key] = true;
                        			}
                        			return me;
                        		}
                        
                        		// Pauses an event subscription for ALL subscribers.
                        		me.pauseAllSubscriptions = pauseAllSubscriptions;
                        		function pauseAllSubscriptions() {
                        			var key;
                        			for (key in active_owners) {
                        				active_owners[key] = false;
                        			}
                        			return me;
                        		}
                        
                        		// Publishes the actual event for the publisher and calls all active subscribers&#x27; callback functions.
                        		me.publish = publish;
                        		function publish() {
                        			stop_propagation = false;
                        
                        			run_count++;
                        
                        			remove_count = 0;
                        
                        			var i,
                        				len = events.length,
                        				ev,
                        				owner,
                        				fn;
                        				
                        			for (i = 0; i &lt; len; i++) {
                        				/*if (remove_count &gt; 0)
                        				window.console.log(&quot;Running event at an offset remove_count: &quot;+remove_count, &quot;background-color:#f90;color:#fff;&quot;);*/
                        
                        				ev = events[i - remove_count];
                        
                        				if (typeof ev === &quot;undefined&quot;) {
                        					window.console.warn(&quot;Failed event on:&quot;);
                        					window.console.warn(that);
                        					throw &quot;Cannot publish event: &quot; + name;
                        				}
                        
                        				owner = ev.owner;
                        
                        				if (stop_propagation) {
                        					IBM.common.util.debug.add(&quot;log&quot;, &quot;Propagation stopped. &quot; + owner + &quot; will not publish this time.&quot;);
                        				}
                        				else if (!active_owners[ev.owner]) {
                        					IBM.common.util.debug.add(&quot;log&quot;, &quot;The [&quot; + owner + &quot;] subscription to the &quot; + that + &quot;[&quot; + name + &quot;] event is not active. (paused)&quot;);
                        				}
                        				else {
                        					ev.runs++;
                        
                        					fn = ev.fn;
                        					
                        					//window.console.groupCollapsed(owner);
                        					
                        					try {
                        						switch (arguments.length) {
                        							case 0:
                        								fn.call(that);
                        								break;
                        							case 1:
                        								fn.call(that, arguments[0]);
                        								break;
                        							case 2:
                        								fn.call(that, arguments[0], arguments[1]);
                        								break;
                        						}
                        					}
                        					catch (er) {
                        						window.console.warn(&quot;Event function[&quot; + i + &quot;] failed. Owner: &quot; + owner);
                        						window.console.error(er);
                        					}
                        					
                        					//window.console.groupEnd();
                        					
                        				}
                        			}
                        		}
                        	}
                        
                        })(IBMCore);
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
