<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index,follow">
    <title>src/js/sources/ibm/common/widgets/videoplayer-youtube.js - IBM v18 (Northstar) common Javascript documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" href="http://www.ibm.com/favicon.ico">
    <script>
        digitalData = {
            page: {
                pageInfo: {
                    effectiveDate: '2017-02-25',
                    expiryDate: '2020-02-25',
                    language: 'en-US',
                    publishDate: '2017-02-25',
                    publisher: 'IBM Corporation',
                    ibm: {
                        contentDelivery: 'yuidoc via grunt',
                        contentProducer: 'Michael Santelia',
                        country: 'US',
                        owner: 'Michael Santelia'
                    }
                }
            }
        };
    </script>

    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>

    <script>

		var lastUpdate = new Date(document.lastModified),
			updatedMonth = lastUpdate.getMonth(),
			updatedDate = lastUpdate.getDate(),
			updatedYear = lastUpdate.getFullYear(),
			today = new Date(),
			todayMonth = today.getMonth(),
			todayDate = today.getDate(),
			todayYear = today.getFullYear(),
			monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"],
			lastUpdatedText = "",
			daysAgo = Math.floor((today - lastUpdate) / (1000*60*60*24));

		updatedMonthName = monthNames[updatedMonth];

		switch (daysAgo) {

			case 1: 
				lastUpdatedText = "Updated yesterday";
				break;
				
			case 0: 
				lastUpdatedText = "Updated today";
				break;
				
			default: 
				lastUpdatedText = "Updated " + daysAgo + " days ago";
				break;
		}

		if (daysAgo > 4) {
			lastUpdatedText = "Updated: " + updatedMonthName + " " + updatedDate + ", " + updatedYear;
		}

    </script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-1-2">
            <div style="background: url(http://1.www.s81c.com/i/v17/t/ibm-logo.png) no-repeat scroll 0px 0px transparent; width: 105px; height: 45px; margin: 0.85em 0px;text-indent:-9999px;">IBM v18 (Northstar) common Javascript documentation</div>
        </div>
        <div class="yui3-u-1-2 version">
            <em>Javascript documentation for: IBM v18 (Northstar)<br />
            	<span style="font-size: 0.6em; position: absolute; right: 35px;"><script>document.writeln(lastUpdatedText)</script></span></em>
        </div>
    </div>
    
    <p><a href="../assets../../v18-js-source-documentation.zip" style="margin-left: 10px; padding-left: 15px; background: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_transactional_blue_ON.png) no-repeat 0 -202px;">Download a copy of this documentation (ZIP).</a></p>
    
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4" style="float: left;width:25%;">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/IBMCore.common.module.backtotop.html">IBMCore.common.module.backtotop</a></li>
                                <li><a href="../classes/IBMCore.common.module.canadanotice.html">IBMCore.common.module.canadanotice</a></li>
                                <li><a href="../classes/IBMCore.common.module.contactmodule.html">IBMCore.common.module.contactmodule</a></li>
                                <li><a href="../classes/IBMCore.common.module.footer.html">IBMCore.common.module.footer</a></li>
                                <li><a href="../classes/IBMCore.common.module.footermenu.html">IBMCore.common.module.footermenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.leftnav.html">IBMCore.common.module.leftnav</a></li>
                                <li><a href="../classes/IBMCore.common.module.liveperson.html">IBMCore.common.module.liveperson</a></li>
                                <li><a href="../classes/IBMCore.common.module.localeselector.html">IBMCore.common.module.localeselector</a></li>
                                <li><a href="../classes/IBMCore.common.module.localpagenotification.html">IBMCore.common.module.localpagenotification</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.html">IBMCore.common.module.masthead</a></li>
                                <li><a href="../classes/IBMCore.common.module.masthead.sticky.html">IBMCore.common.module.masthead.sticky</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadbanner.html">IBMCore.common.module.mastheadbanner</a></li>
                                <li><a href="../classes/IBMCore.common.module.mastheadsearch.html">IBMCore.common.module.mastheadsearch</a></li>
                                <li><a href="../classes/IBMCore.common.module.merchandising.html">IBMCore.common.module.merchandising</a></li>
                                <li><a href="../classes/IBMCore.common.module.mobilemenu.html">IBMCore.common.module.mobilemenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethiscontent.html">IBMCore.common.module.sharethiscontent</a></li>
                                <li><a href="../classes/IBMCore.common.module.sharethispage.html">IBMCore.common.module.sharethispage</a></li>
                                <li><a href="../classes/IBMCore.common.module.sitenavmenu.html">IBMCore.common.module.sitenavmenu</a></li>
                                <li><a href="../classes/IBMCore.common.module.urx.html">IBMCore.common.module.urx</a></li>
                                <li><a href="../classes/IBMCore.common.translations.html">IBMCore.common.translations</a></li>
                                <li><a href="../classes/IBMCore.common.util.a11y.html">IBMCore.common.util.a11y</a></li>
                                <li><a href="../classes/IBMCore.common.util.addCssRule.html">IBMCore.common.util.addCssRule</a></li>
                                <li><a href="../classes/IBMCore.common.util.anchorlinkAdjustment.html">IBMCore.common.util.anchorlinkAdjustment</a></li>
                                <li><a href="../classes/IBMCore.common.util.bitly.html">IBMCore.common.util.bitly</a></li>
                                <li><a href="../classes/IBMCore.common.util.color.html">IBMCore.common.util.color</a></li>
                                <li><a href="../classes/IBMCore.common.util.config.html">IBMCore.common.util.config</a></li>
                                <li><a href="../classes/IBMCore.common.util.convertSecondsToHMS.html">IBMCore.common.util.convertSecondsToHMS</a></li>
                                <li><a href="../classes/IBMCore.common.util.cookie.html">IBMCore.common.util.cookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.coreservices.html">IBMCore.common.util.coreservices</a></li>
                                <li><a href="../classes/IBMCore.common.util.data.html">IBMCore.common.util.data</a></li>
                                <li><a href="../classes/IBMCore.common.util.debug.html">IBMCore.common.util.debug</a></li>
                                <li><a href="../classes/IBMCore.common.util.eventCoordinator.html">IBMCore.common.util.eventCoordinator</a></li>
                                <li><a href="../classes/IBMCore.common.util.freezeScrollbars.html">IBMCore.common.util.freezeScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.gatekeeper.html">IBMCore.common.util.gatekeeper</a></li>
                                <li><a href="../classes/IBMCore.common.util.generateId.html">IBMCore.common.util.generateId</a></li>
                                <li><a href="../classes/IBMCore.common.util.getCurrentGridSize.html">IBMCore.common.util.getCurrentGridSize</a></li>
                                <li><a href="../classes/IBMCore.common.util.getDataAttributes.html">IBMCore.common.util.getDataAttributes</a></li>
                                <li><a href="../classes/IBMCore.common.util.getScrollbarWidth.html">IBMCore.common.util.getScrollbarWidth</a></li>
                                <li><a href="../classes/IBMCore.common.util.has12grid.html">IBMCore.common.util.has12grid</a></li>
                                <li><a href="../classes/IBMCore.common.util.hasScrollbars.html">IBMCore.common.util.hasScrollbars</a></li>
                                <li><a href="../classes/IBMCore.common.util.meta.html">IBMCore.common.util.meta</a></li>
                                <li><a href="../classes/IBMCore.common.util.perf.html">IBMCore.common.util.perf</a></li>
                                <li><a href="../classes/IBMCore.common.util.queue.html">IBMCore.common.util.queue</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolledintoview.html">IBMCore.common.util.scrolledintoview</a></li>
                                <li><a href="../classes/IBMCore.common.util.scrolltracker.html">IBMCore.common.util.scrolltracker</a></li>
                                <li><a href="../classes/IBMCore.common.util.setIpcCookie.html">IBMCore.common.util.setIpcCookie</a></li>
                                <li><a href="../classes/IBMCore.common.util.statshelper.html">IBMCore.common.util.statshelper</a></li>
                                <li><a href="../classes/IBMCore.common.util.storage.html">IBMCore.common.util.storage</a></li>
                                <li><a href="../classes/IBMCore.common.util.string.htmlspecialchars.html">IBMCore.common.util.string.htmlspecialchars</a></li>
                                <li><a href="../classes/IBMCore.common.util.url.html">IBMCore.common.util.url</a></li>
                                <li><a href="../classes/IBMCore.common.util.user.html">IBMCore.common.util.user</a></li>
                                <li><a href="../classes/IBMCore.common.widget.carousel.html">IBMCore.common.widget.carousel</a></li>
                                <li><a href="../classes/IBMCore.common.widget.ccfintercept.html">IBMCore.common.widget.ccfintercept</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datatable.html">IBMCore.common.widget.datatable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.datepicker.html">IBMCore.common.widget.datepicker</a></li>
                                <li><a href="../classes/IBMCore.common.widget.dyntabs.html">IBMCore.common.widget.dyntabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.fileinput.html">IBMCore.common.widget.fileinput</a></li>
                                <li><a href="../classes/IBMCore.common.widget.forms.html">IBMCore.common.widget.forms</a></li>
                                <li><a href="../classes/IBMCore.common.widget.formvalidator.html">IBMCore.common.widget.formvalidator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.leavingibm.html">IBMCore.common.widget.leavingibm</a></li>
                                <li><a href="../classes/IBMCore.common.widget.manager.html">IBMCore.common.widget.manager</a></li>
                                <li><a href="../classes/IBMCore.common.widget.masonry.html">IBMCore.common.widget.masonry</a></li>
                                <li><a href="../classes/IBMCore.common.widget.overlay.html">IBMCore.common.widget.overlay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.parallaxscroll.html">IBMCore.common.widget.parallaxscroll</a></li>
                                <li><a href="../classes/IBMCore.common.widget.rssdisplay.html">IBMCore.common.widget.rssdisplay</a></li>
                                <li><a href="../classes/IBMCore.common.widget.scrollable.html">IBMCore.common.widget.scrollable</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlist.html">IBMCore.common.widget.selectlist</a></li>
                                <li><a href="../classes/IBMCore.common.widget.selectlistnav.html">IBMCore.common.widget.selectlistnav</a></li>
                                <li><a href="../classes/IBMCore.common.widget.setsameheight.html">IBMCore.common.widget.setsameheight</a></li>
                                <li><a href="../classes/IBMCore.common.widget.showhide.html">IBMCore.common.widget.showhide</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stepindicator.html">IBMCore.common.widget.stepindicator</a></li>
                                <li><a href="../classes/IBMCore.common.widget.stickytabs.html">IBMCore.common.widget.stickytabs</a></li>
                                <li><a href="../classes/IBMCore.common.widget.syntaxhighlighter.html">IBMCore.common.widget.syntaxhighlighter</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tablerowselector.html">IBMCore.common.widget.tablerowselector</a></li>
                                <li><a href="../classes/IBMCore.common.widget.tooltip.html">IBMCore.common.widget.tooltip</a></li>
                                <li><a href="../classes/IBMCore.common.widget.twisty.html">IBMCore.common.widget.twisty</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videolooper.html">IBMCore.common.widget.videolooper</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.html">IBMCore.common.widget.videoplayer</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.kaltura.html">IBMCore.common.widget.videoplayer.kaltura</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.ustream.html">IBMCore.common.widget.videoplayer.ustream</a></li>
                                <li><a href="../classes/IBMCore.common.widget.videoplayer.youtube.html">IBMCore.common.widget.videoplayer.youtube</a></li>
                                <li><a href="../classes/IBMCore.namespace.html">IBMCore.namespace</a></li>
                                <li><a href="../classes/IBMCore.www.module.dynamiccontactmodule.html">IBMCore.www.module.dynamiccontactmodule</a></li>
                                <li><a href="../classes/IBMCore.www.module.truste.html">IBMCore.www.module.truste</a></li>
                                <li><a href="../classes/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../classes/jQuery.fn.dataTable.html">jQuery.fn.dataTable</a></li>
                                <li><a href="../classes/jQuery.fn.slick.html">jQuery.fn.slick</a></li>
                                <li><a href="../classes/jQuery.layout.html">jQuery.layout</a></li>
                                <li><a href="../classes/jQuery.os.html">jQuery.os</a></li>
                                <li><a href="../classes/jQuery:focusable.html">jQuery:focusable</a></li>
                                <li><a href="../classes/Masonry.html">Masonry</a></li>
                                <li><a href="../classes/Modernizr.html">Modernizr</a></li>
                                <li><a href="../classes/Mustache.html">Mustache</a></li>
                                <li><a href="../classes/NanoScroll.html">NanoScroll</a></li>
                                <li><a href="../classes/Other IBM - Canada notice loader.html">Other IBM - Canada notice loader</a></li>
                                <li><a href="../classes/Other IBM - common init.html">Other IBM - common init</a></li>
                                <li><a href="../classes/Other IBM - common v18 page tracker.html">Other IBM - common v18 page tracker</a></li>
                                <li><a href="../classes/Other IBM - errorchecking.html">Other IBM - errorchecking</a></li>
                                <li><a href="../classes/Other IBM - footer feedback link.html">Other IBM - footer feedback link</a></li>
                                <li><a href="../classes/Other IBM - grid change.html">Other IBM - grid change</a></li>
                                <li><a href="../classes/Other IBM - jstimer-end.html">Other IBM - jstimer-end</a></li>
                                <li><a href="../classes/Other IBM - jstimer-start.html">Other IBM - jstimer-start</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/IBMCore.html">IBMCore</a></li>
                                <li><a href="../modules/jQuery.browser.html">jQuery.browser</a></li>
                                <li><a href="../modules/jQuery.dataTable.html">jQuery.dataTable</a></li>
                                <li><a href="../modules/jQuery.slick.html">jQuery.slick</a></li>
                                <li><a href="../modules/Masonry.html">Masonry</a></li>
                                <li><a href="../modules/Modernizr.html">Modernizr</a></li>
                                <li><a href="../modules/Mustache.html">Mustache</a></li>
                                <li><a href="../modules/Nanoscroller.html">Nanoscroller</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4"style="float: left;width:75%;">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected" checked>
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private" checked>
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated" checked>
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/sources/ibm/common/widgets/videoplayer-youtube.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                        
                        	Youtube video widget.
                        	&lt;br&gt;Dependency: videoplayer.js
                        	&lt;br&gt;View the &lt;a href=&quot;IBMCore.common.widget.videoplayer.html&quot;&gt;videoplayer.js&lt;/a&gt; for all implementation and options detailer. It is the main controller class that creates the proper object and setup.
                        	&lt;br&gt;This is the video player sub-class for the Youtube embedded video player object.
                        	&lt;br&gt;
                        	&lt;br&gt;__Event usage__: Subscribe to the IBM widget init event that fires on your DOM element to know when the widget has been initialized and you can access its APIs.
                        
                        	@class IBMCore.common.widget.videoplayer.youtube
                        
                        **/
                        
                        /**
                        
                        	Youtube video player widget subclass.
                        
                        	Dependency: videoplayer.js
                        
                        	Youtube API documentation URLs:
                        		IFRAME api reference:
                        			https://developers.google.com/youtube/iframe_api_reference
                        
                        		PlayerVars parameters:
                        			https://developers.google.com/youtube/player_parameters#Parameters
                        
                        		JS API (used to &quot;externally&quot; control a video player):
                        			https://developers.google.com/youtube/js_api_reference
                        
                        		Data API v2 (DEPRECATED, what v17 used):
                        			https://gdata.youtube.com/feeds/api/videos/&lt;videoID&gt;?v=2&amp;alt=json&amp;callback=someCallbackName
                        
                        		Data API v3 (need to use key):
                        			https://developers.google.com/youtube/v3/
                        
                        		Get a video&#x27;s image/thumb:
                        			https://i.ytimg.com/vi/&lt;videoID&gt;/hqdefault.jpg  or &quot;maxresdefault.jpg&quot;
                        
                        		Get info (title, descr, duration) about a video (accepts CSV list of videoIDs):
                        			https://www.googleapis.com/youtube/v3/videos?part=contentDetails%2C+snippet&amp;id=&lt;videoid&gt;&amp;key=&lt;apikey&gt;
                        
                        		Get list of videos from a playlist ID:
                        			https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&amp;maxResults=&lt;maxNum&gt;&amp;playlistId=&lt;playlistid&gt;&amp;key=&lt;apikey&gt;
                        
                        	API NOTE:
                        		The API key is owned by Michael Santelia. Keys to use can be generated and daily usage limits can be checked from
                        		 the Google developer console:
                        
                        		https://console.developers.google.com/project
                        
                        		The API limit is 50 MILLION units per 24 hours. Each video request, depending on data requested is ~30 units worth.
                        		If there are issues or we hit the limit, contact Michael Santelia to check the quota.
                        		We can always create multiple keys and randomize which one is used to spread out the usage.
                        
                        
                        **/
                        /**
                        
                        	Process flow:
                        		For each DOM element that has data-widget=video and is youtube, one of these object is created
                        		  and attached to it via: $EL.data(&quot;widget&quot;).player
                        		  If there is an overlay object it&#x27;s at: $EL.data().widget.overlay and the trigger is at: $EL.data.widget.trigger
                        
                        		After the new object is created, .init() is run. Init loads the YT api if it doesn&#x27;t exist already (glob var),
                        		   and then creates the video players for inline and overlay players.
                        		Each video player creates a new YT player object, which injects a YT iframe and replaces the $EL that was tagged for a video widget and the rest is history.
                        		If the player is in an overlay, we do an extra step (before) and create an overlay, inject it, then embed the YT Player in the overlay.
                        
                        **/
                        (function($, IBM) {
                          var ibmYt = IBM.namespace(IBM, &#x27;common.widget.videoplayer.youtube&#x27;);
                        
                          // Flag so that multiple YT widgets on a page only load the API once for the entire page.
                          ibmYt.apiStatus = &#x27;&#x27;;
                        
                          /**
                        		Published on widget&#x27;s DOM element AFTER YOUTUBE PLACEHOLDER TRIGGER IS CLICKED and actual video player is injected.
                        		&lt;br&gt;&lt;strong&gt;Example usage&lt;/strong&gt;:
                        		&lt;pre&gt;
                        			jQuery(&quot;&amp;lt;your_widget_selector&gt;&quot;)[0].addEventListener(&quot;ibm-init&quot;, function (evt) {
                        			    // Youtube player widget is embedded and API is available.
                        			});
                        		&lt;/pre&gt;
                        
                        		@event ibm-init
                        	**/
                          /**
                        		Take Youtube video duration string and format it to standard HH:MM:SS time stamp.
                        
                        		@method formatVideoDuration
                        		@private
                        		@param isoFormatedDuration {String} The video duration value from the Kaltura API.
                        		@return {String} The formatted duration in standard formatting: HH:MM:SS.
                        	**/
                          function formatVideoDuration(isoFormatedDuration) {
                            var array = isoFormatedDuration.match(/(\d+)(?=[MHS])/gi) || [],
                              formatted = array
                                .map(function(item) {
                                  if (item.length &lt; 2) {
                                    return &#x27;0&#x27; + item;
                                  }
                                  return item;
                                })
                                .join(&#x27;:&#x27;);
                        
                            // If there&#x27;s no minutes (nothing to concat above), add leading &quot;00:&quot; to denote seconds only.
                            // Else there&#x27;s an anomoly in the API that YT returns minutes only when it&#x27;s exact, and not even 0 seconds,
                            //  so set it to show the # as the minutes and put the :00 AFTER the number.
                            if (formatted.indexOf(&#x27;:&#x27;) === -1) {
                              if (isoFormatedDuration.indexOf(&#x27;M&#x27;) &lt; 0) {
                                formatted = &#x27;00:&#x27; + formatted;
                              } else {
                                formatted = formatted + &#x27;:00&#x27;;
                              }
                            }
                        
                            return formatted;
                          }
                        
                          /**
                        		Loads the Youtube IFRAME API. Only runs once, based on empty api status/flag.
                        
                        		@method loadApi
                        	**/
                          ibmYt.loadApi = function() {
                            if (ibmYt.apiStatus !== &#x27;&#x27;) {
                              return;
                            }
                        
                            //console.log(&quot;Requesting YT iframe API&quot;);
                        
                            ibmYt.apiStatus = &#x27;loading&#x27;;
                        
                            var tag = document.createElement(&#x27;script&#x27;),
                              firstScriptTag = document.getElementsByTagName(&#x27;script&#x27;)[0];
                            tag.src = &#x27;https://www.youtube.com/iframe_api&#x27;;
                            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                          };
                        
                          /**
                        		Player contructor object for the Youtube video player.
                        		&lt;br /&gt;Dependency: videoplayer.js
                        		&lt;br /&gt;Used by the video player factory in videoplayer.js file, which is used by the jQuery plug-in.
                        		&lt;br /&gt;You can&#x27;t use this directly. Use the standard jQuery(xxxx).videoplayer() plug-in method to create a video player.
                        
                        		@method Player
                        		@constructor
                        		@param [settings] {Object} Settings to override defaults and element&#x27;s @data-xxxx attributes.
                        		@example
                        			// You can access your widget object that was created (this) using the standard convention:
                        			jQuery(&quot;&lt;your_player_container_selector&gt;&quot;).data(&quot;widget&quot;);
                        	**/
                          ibmYt.Player = function(userSettings) {
                            var me = this,
                              myEvents = IBM.common.util.eventCoordinator(me, &#x27;videoplayer&#x27;, [
                                &#x27;videoDataReady&#x27;,
                              ]),
                              ibmVp = IBM.common.widget.videoplayer,
                              ytKey = &#x27;AIzaSyBPJgae27KnTkonw-GBNoY9i3eyEA1j8Tw&#x27;,
                              api = {
                                images: {
                                  video: {
                                    thumbnail: &#x27;https://i.ytimg.com/vi/{videoId}/default.jpg&#x27;,
                                    medium: &#x27;https://i.ytimg.com/vi/{videoId}/hqdefault.jpg&#x27;,
                                    large: &#x27;https://i.ytimg.com/vi/{videoId}/maxresdefault.jpg&#x27;,
                                  },
                                },
                                playlistVideos:
                                  &#x27;https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&amp;maxResults={maxResults}&amp;playlistId={playlistId}&amp;key=&#x27; +
                                  ytKey,
                                videoInfo:
                                  &#x27;https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet&amp;id={videoId}&amp;key=&#x27; +
                                  ytKey,
                                videoDuration:
                                  &#x27;https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet&amp;id={videoId}&amp;key=&#x27; +
                                  ytKey,
                              },
                              appliedPlayerVars = {},
                              appliedSettings = {},
                              defaults = {
                                events: {
                                  onStateChange: onPlayerStateChange,
                                  onError: onPlayerError,
                                },
                                settings: {
                                  // Make lowercase so they can be easily overridden by @data-attr.
                                  autoplay: false,
                                  carouselcolumns: 6,
                                  customplaceholder: false,
                                  imagesize: &#x27;large&#x27;,
                                  maxnumvideos: 20,
                                  overlayclasses: &#x27;ibm-common-overlay ibm-overlay-alt&#x27;,
                                  overlayplayerwidth: 564,
                                  overlayplayersize: &#x27;medium&#x27;, // &quot;medium&quot; is the preset for the above overlay params
                                  placeholderalttext: &#x27;&#x27;,
                                  showimageplaybutton: true,
                                  showvideodescription: false,
                                  showvideoduration: true,
                                  showvideotitle: true,
                                  theatermode: false,
                                  titledisplaytype: &#x27;below&#x27;,
                                  videodisplay: &#x27;inline&#x27;,
                                  videodurationcolor: &#x27;default&#x27;,
                                  videoid: &#x27;&#x27;, // Single video or CSV for &quot;manual&quot; playlists.
                                  videoplaylistid: &#x27;&#x27;, // Single playlist ID.
                                  videoratio: &#x27;16/9&#x27;, // this is a string to make it easy for consistency.
                                  videotitleoverride: &#x27;&#x27;,
                                  videotype: &#x27;youtube&#x27;,
                                },
                              },
                              playerPlaceholderClass = &#x27;ibm-video-placeholder&#x27;,
                              playerVars = {
                                dataPrefix: &#x27;playervar_&#x27;,
                                defaults: {
                                  //autohide: 1,
                                  autoplay: 1,
                                  hl: IBM.common.meta.page.pageInfo.language.toLowerCase(),
                                  iv_load_policy: 3,
                                  listType: &#x27;playlist&#x27;,
                                  origin: document.location.protocol + &#x27;//&#x27; + document.location.host,
                                  rel: 0,
                                  showinfo: 1,
                                },
                                force: {
                                  controls: 1,
                                  modestbranding: 0,
                                  theme: &#x27;dark&#x27;,
                                },
                              },
                              videoData = {};
                        
                            // &quot;userSettings&quot; came in from videoplayer.js factory and include all element&#x27;s @data-attrs and parent defaults.
                            // Merge in the user&#x27;s settings and overwrite any defaults and update appliedSettings.
                            $.extend(true, appliedSettings, defaults.settings, userSettings);
                        
                            appliedSettings.id =
                              appliedSettings.origEl.id || IBM.common.util.generateId();
                            appliedSettings.$origEl = $(appliedSettings.origEl);
                            appliedSettings.$restoreEl = appliedSettings.$origEl.clone(true);
                        
                            // Merge in the element&#x27;s @data-playervars and overwrite any defaults and update appliedPlayerVars.
                            // Keep the &quot;forced&quot; settings (don&#x27;t let devs override these).
                            $.extend(
                              true,
                              appliedPlayerVars,
                              playerVars.defaults,
                              getUserDefinedPlayerVars(),
                              playerVars.force
                            );
                        
                            // Make the vars and settings public to this object instace so they can be seen and used.
                            // We use all local vars for these, so try not to change playervars or settings after this point else
                            //   the public values will be different.
                            me.appliedPlayerVars = appliedPlayerVars;
                            me.appliedSettings = appliedSettings;
                        
                            // If they specified a playlist, make sure to add it to the player vars also so the list option
                            //  shows in the top left corner.
                            if (me.appliedSettings.videoplaylistid !== &#x27;&#x27;) {
                              me.appliedPlayerVars.list = me.appliedSettings.videoplaylistid;
                            }
                        
                            me.player = { status: &#x27;YT.player not created yet&#x27; };
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br /&gt;Destroys the widget and puts back the original HTML element that existed before the widget initialized.
                        
                        			@method Player.destroy
                        			@return {jQuery/DOM element} The original element that was put back (that you called widget destroy on).
                        		**/
                            me.destroy = function() {
                              if (me.overlay) {
                                me.overlay.destroy();
                              }
                        
                              // If it&#x27;s a carousel, kill all the carousel&#x27;s overlays, if they exist.
                              if (appliedSettings.videodisplay.indexOf(&#x27;carousel-&#x27;) &gt; -1) {
                                appliedSettings.$origEl.find(&#x27;.ibm-video-player-con&#x27;).each(function() {
                                  if ($(this).data(&#x27;widget&#x27;).overlay) {
                                    $(this)
                                      .data(&#x27;widget&#x27;)
                                      .overlay.destroy();
                                  }
                                });
                              }
                        
                              appliedSettings.$origEl.replaceWith(appliedSettings.$restoreEl);
                        
                              return appliedSettings.$restoreEl;
                            };
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Called by videoplayer.js jQuery plugin after the factory returns a player object (an instance of this &quot;Player&quot; object).
                        			&lt;br /&gt;If YT API doesn&#x27;t exist on the page already; include it, wait for it to be available, then create this player widget.
                        			&lt;br /&gt;Else if we&#x27;ve already included the API, create this player widget.
                        
                        			@method Player.init
                        		**/
                            me.init = init;
                            function init() {
                              var ytApiListener, ytTimeout;
                        
                              if (typeof YT === &#x27;undefined&#x27;) {
                                ytApiListener = IBM.common.util.queue.push(
                                  function() {
                                    return typeof YT !== &#x27;undefined&#x27;;
                                  },
                                  function() {
                                    clearTimeout(ytTimeout);
                                    ibmYt.apiStatus = &#x27;ready&#x27;;
                                    setupPlayerWidget();
                                  }
                                );
                        
                                ytTimeout = setTimeout(function() {
                                  IBM.common.util.queue.remove(ytApiListener);
                                  window.console.warn(
                                    &#x27;YouTube API took to long. Falling back to Kaltura.&#x27;
                                  );
                                  fallbackToKaltura();
                                }, 3000);
                        
                                ibmYt.loadApi();
                              } else {
                                setupPlayerWidget();
                              }
                            }
                        
                            /**
                        			EVENTS functions (for metrics).
                        		************************************************************************************************************/
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Fires a metrics event when this video player state changes (hits play, pause, ended, etc).
                        			&lt;br /&gt;Uses Youtube player states:
                        			&lt;br /&gt;0 = ended, 1 = played, 2 = paused, 3 = error.
                        
                        			@method Player.onPlayerStateChange
                        			@private
                        			@param event {Object} The player state change event object.
                        		**/
                            function onPlayerStateChange(event) {
                              var cmState = convertToCoremetricsState(event),
                                eventData = {
                                  playerType: &#x27;youtube&#x27;,
                                  title: event.target.getVideoData().title,
                                  currentTime: event.target.getCurrentTime(),
                                  duration: event.target.getDuration(),
                                  playerState: cmState,
                                  videoId: appliedSettings.videoid,
                                };
                        
                              // Get any custom ibmevent tagging on the element to pass to the event fire.
                              eventData.customMetricsData = IBM.common.util.statshelper.getCustomEventParams(
                                appliedSettings.$origEl
                              );
                              ibmVp.fireVideoEvent(eventData);
                        
                              // If this video was played, pause all others.
                              if (event.data === 1) {
                                pauseOtherVideos();
                              }
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Converts the Youtube state to the coremetrics state for special metrics reporting.
                        
                        			@method Player.convertToCoremetricsState
                        			@private
                        			@param event {Object} The player state change event object.
                        			@return {Integer} The coremetrics player state number.
                        		**/
                            function convertToCoremetricsState(event) {
                              var cmState = 1111;
                        
                              // Youtube states:
                              //   0 = ended, 1 = played, 2 = paused, 3 = error.
                              // Normalize to Coremetrics #s.
                              // 0 = launch, 1 = pause, 2 = play, 3 = completion.
                              switch (event.data) {
                                case 0:
                                  cmState = 3;
                                  break;
                        
                                case 1:
                                  if (Math.round(event.target.getCurrentTime()) === 0) {
                                    cmState = 0;
                                  } else {
                                    cmState = 2;
                                  }
                                  break;
                        
                                case 2:
                                  cmState = 1;
                                  break;
                        
                                default:
                                  cmState = 9999;
                              }
                        
                              return cmState;
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Fires a metrics event when the video player throws an error (invalid param, video 404, not allowed to be embedded, etc).
                        
                        			@method Player.onPlayerError
                        			@private
                        			@param event {Object} The player state change event object.
                        		**/
                            function onPlayerError(event) {
                              var eventData = {
                                title: event.target.getVideoData().title,
                                currentTime: &#x27;0&#x27;,
                                duration: event.target.getDuration(),
                                playerState: 99, // Our error code
                              };
                        
                              // Get any custom ibmevent tagging on the element to pass to the event fire.
                              eventData.customMetricsData = IBM.common.util.statshelper.getCustomEventParams(
                                appliedSettings.$origEl
                              );
                        
                              ibmVp.fireVideoEvent(eventData);
                            }
                        
                            /**
                        			WIDGET functions.
                        		************************************************************************************************************/
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Takes the @data-overlayplayersize and converts that preset to the proper width and classes needed for the
                        			&lt;br /&gt;Optional based on embed settings.
                        
                        			@method Player.setOverlayPresets
                        			@private
                        		**/
                            function setOverlayPresets() {
                              if (appliedSettings.overlayplayersize === &#x27;large&#x27;) {
                                appliedSettings.overlayplayerwidth = 745;
                                appliedSettings.overlayclasses =
                                  &#x27;ibm-common-overlay ibm-overlay-alt-two&#x27;;
                              } else if (appliedSettings.overlayplayersize === &#x27;xlarge&#x27;) {
                                appliedSettings.overlayplayerwidth = 975;
                                appliedSettings.overlayclasses =
                                  &#x27;ibm-common-overlay ibm-overlay-alt-three&#x27;;
                              } else {
                                appliedSettings.overlayplayerwidth =
                                  defaults.settings.overlayplayerwidth;
                                appliedSettings.overlayclasses = defaults.settings.overlayclasses;
                              }
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Adds the aria-label to the trigger for better a11y so screen reader reads name of hosting service also.
                        
                        			@method PLayer.addAriaLabel
                        			@private
                        			@param $el {jQuery DOM selector} The placeholder trigger element where we&#x27;re putting the aria-label.
                        			@param customText {String} Custom text (existing) to use, else uses video title.
                        		**/
                        
                            function addAriaLabel($el, customText) {
                              var videoTitle =
                                  appliedSettings.videotitleoverride !== &#x27;&#x27;
                                    ? appliedSettings.videotitleoverride
                                    : videoData.items[0].snippet.title,
                                ariaText = !customText || customText === &#x27;&#x27; ? videoTitle : customText;
                        
                              $el.attr(&#x27;aria-label&#x27;, &#x27;Youtube - &#x27; + ariaText);
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Adds the video description, name, and formatted time to the placeholder.
                        			&lt;br /&gt;Optional based on embed settings.
                        
                        			@method PLayer.addPlaceholderInfo
                        			@private
                        		**/
                            function addPlaceholderInfo() {
                              // Creates the title and descr and passes back to us to do what we want with it.
                              myEvents.subscribe(&#x27;videoDataReady&#x27;, &#x27;videoplayer&#x27;, function() {
                                var dataObj = videoData;
                        
                                if (!dataObj.items[0]) {
                                  return;
                                }
                        
                                var infoHtml = &#x27;&#x27;,
                                  durationHtml = &#x27;&#x27;,
                                  videoTitle =
                                    appliedSettings.videotitleoverride !== &#x27;&#x27;
                                      ? appliedSettings.videotitleoverride
                                      : dataObj.items[0].snippet.title,
                                  placeholderAlt =
                                    appliedSettings.placeholderalttext !== &#x27;&#x27;
                                      ? appliedSettings.placeholderalttext
                                      : videoTitle;
                        
                                if (appliedSettings.showvideoduration) {
                                  durationHtml =
                                    &#x27;&lt;div class=&quot;ibm-video-duration&quot;&gt;&lt;p class=&quot;ibm-padding-bottom-0&quot;&gt;&#x27; +
                                    dataObj.formattedTime +
                                    &#x27;&lt;/p&gt;&lt;/div&gt;&#x27;;
                                }
                        
                                if (appliedSettings.showvideotitle) {
                                  infoHtml +=
                                    &#x27;&lt;div class=&quot;ibm-video-title ibm-bold&quot;&gt;&lt;p class=&quot;ibm-padding-bottom-0&quot;&gt;&#x27; +
                                    videoTitle +
                                    &#x27;&lt;/p&gt;&lt;/div&gt;&#x27;;
                                }
                        
                                if (appliedSettings.showvideodescription) {
                                  infoHtml +=
                                    &#x27;&lt;p class=&quot;ibm-padding-bottom-0&quot;&gt;&#x27; +
                                    dataObj.items[0].snippet.description +
                                    &#x27;&lt;/p&gt;&#x27;;
                                }
                        
                                // If video title set to display overlay&#x27;d, put the info into info container,
                                //  else put under/after placeholder.
                                if (
                                  appliedSettings.titledisplaytype === &#x27;overlay&#x27; &amp;&amp;
                                  durationHtml !== &#x27;&#x27; &amp;&amp;
                                  infoHtml !== &#x27;&#x27;
                                ) {
                                  me.$trigger.append(
                                    &#x27;&lt;div class=&quot;ibm-video-info&quot;&gt;&#x27; + durationHtml + infoHtml + &#x27;&lt;/div&gt;&#x27;
                                  );
                                } else {
                                  if (durationHtml !== &#x27;&#x27;) {
                                    me.$trigger.append(
                                      &#x27;&lt;div class=&quot;ibm-video-info&quot;&gt;&#x27; + durationHtml + &#x27;&lt;/div&gt;&#x27;
                                    );
                                  }
                        
                                  appliedSettings.$origEl.children(&#x27;div&#x27;).after(infoHtml);
                                }
                        
                                // Add the video title as the alt text.
                                me.$trigger.children(&#x27;img&#x27;).attr(&#x27;alt&#x27;, placeholderAlt);
                              });
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Calculates a height for a given number using the default video apect ratio (16/9).
                        			@method Player.calcHeight
                        			@private
                        			@param num {Integer} The number to use as a width to calculate the proper height for.
                        			@return {Integer} The number to use as a height for the given width.
                        		**/
                            function calcHeight(num) {
                              var ratioArr = appliedSettings.videoratio.split(&#x27;/&#x27;),
                                w = ratioArr[0],
                                h = ratioArr[1];
                        
                              return num / (w / h);
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Checks that maxres exists from API data, and if not, switches image to medium res one.
                        
                        			@method Player.createInlinePlayer
                        			@private
                        		**/
                            function checkHighResImage() {
                              if (!videoData.items[0].snippet.thumbnails.maxres) {
                                me.$trigger
                                  .find(&#x27;img&#x27;)
                                  .attr(&#x27;src&#x27;, videoData.items[0].snippet.thumbnails.medium.url);
                              }
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Wrap the original element in a div since we REPLACE it with the youtube player and attach the player widget object to it.
                        			&lt;br /&gt;Then embed the video, replacing the original element (that the plugin was called on).
                        
                        			@method Player.createInlinePlayer
                        			@private
                        			@param $el {jQuery DOM selector} The element where we&#x27;re putting the placeholder.
                        			@param videoId {String} The video (ID) we&#x27;re embedding the placeholder for.
                        		**/
                            function createInlinePlayer($el, videoId) {
                              //appliedPlayerVars.autoplay = 1;
                              embedVideo($el, videoId); // Uses the DOM el, not the selector.
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Take the video ID and get the image.
                        			&lt;br /&gt;Create, bind, and replace origEl innerHTML with: a-&gt;img.
                        			&lt;br /&gt;Onclick of the &lt;a&gt; we injected, embed the video player (and play it).
                        
                        			@method Player.createPlayerTrigger
                        			@private
                        			@param videoId {String} The video (ID) we&#x27;re embedding the placeholder/trigger for.
                        		**/
                            function createPlayerTrigger(videoId) {
                              var useImageSize =
                                  api.images.video[appliedSettings.imagesize] || api.images.video.large,
                                autoPlaceholder = $(&#x27;&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;&#x27;).html(
                                  &#x27;&lt;img src=&quot;&#x27; +
                                    useImageSize.replace(&#x27;{videoId}&#x27;, videoId) +
                                    &#x27;&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;&quot; /&gt;&#x27;
                                );
                        
                              //me.$trigger = $(&#x27;&lt;a class=&quot;&#x27; + useClass + &#x27;&quot; href=&quot;#&quot;&gt;&lt;/a&gt;&#x27;).html(&#x27;&lt;img src=&quot;&#x27; + api.images.video.large.replace(&#x27;{videoId}&#x27;, videoId) + &#x27;&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;&quot; /&gt;&#x27;).prepend(&#x27;&lt;span class=&quot;ibm-video-play&quot;&gt;&lt;/span&gt;&#x27;);
                        
                              // If they are using a custom placeholder, set the trigger to their &lt;a&gt;.
                              // Otherwise, use the auto placeholder.
                              me.$trigger = appliedSettings.customplaceholder
                                ? appliedSettings.$origEl.find(&#x27;a&#x27;)
                                : autoPlaceholder;
                        
                              // When API data is available, if maxres image we use above doesn&#x27;t exist use medium one.
                              if (!appliedSettings.customplaceholder) {
                                myEvents
                                  .subscribe(&#x27;videoDataReady&#x27;, &#x27;videoplayer&#x27;, checkHighResImage)
                                  .runAsap(checkHighResImage);
                              }
                        
                              // Add the class to the trigger.
                              me.$trigger.addClass(playerPlaceholderClass);
                        
                              if (appliedSettings.showimageplaybutton) {
                                addPlaybutton(me.$trigger);
                              }
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Converts the Youtube state to the coremetrics state for special metrics reporting.
                        
                        			@method Player.addPlaybutton
                        			@private
                        			@param event {jQuery DOM object} The trigger element to inject a play button into.
                        		**/
                            function addPlaybutton($triggerLink) {
                              $triggerLink
                                .find(&#x27;img&#x27;)
                                .before(&#x27;&lt;span class=&quot;ibm-play-youtube&quot;&gt;&lt;/span&gt;&#x27;)
                                .parent();
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Does the actual video player embed.
                        
                        			@method Player.embedVideo
                        			@private
                        			@param $ell {jQuery DOM selector} The element where we&#x27;re putting the placeholder.
                        			@param videoId {String} The video (ID) we&#x27;re embedding the placeholder for.
                        		**/
                            function embedVideo($el, videoId) {
                              var useHeight = me.overlay
                                ? calcHeight(appliedSettings.width)
                                : calcHeight(appliedSettings.$origEl.width());
                        
                              // eslint-disable-next-line no-undef
                              YT.ready(function() {
                                // eslint-disable-next-line no-undef
                                var player = new YT.Player($el[0], {
                                  videoId: videoId,
                                  width: appliedSettings.theatermode ? appliedSettings.width : &#x27;100%&#x27;,
                                  height: useHeight,
                                  host: &#x27;https://www.youtube-nocookie.com&#x27;,
                                  playerVars: appliedPlayerVars,
                                  events: defaults.events,
                                });
                        
                                me.player = player;
                              });
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Takes user-defined playerVars from data-xxxxx naming convention and returns them to be merged into applied settings.
                        
                        			@method Player.getUserDefinedPlayerVars
                        			@private
                        			@return {Object} An object containing the settings to use for the video embed.
                        		**/
                            function getUserDefinedPlayerVars() {
                              return IBM.common.util.getDataAttributes(
                                appliedSettings.$origEl,
                                playerVars.dataPrefix
                              );
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Calls API to get video info and stores in a var and fires event for subscribers.
                        
                        			@method Player.getVideoInfo
                        			@private
                        			@param videoId {String} The video (ID) we want to get info for
                        			@param cb {Function} The function to call and pass the returned data object to.
                        		**/
                            // eslint-disable-next-line no-unused-vars
                            function getVideoInfo(videoId, cb) {
                              // Get the duration and inject it into the placeholder we just injected.
                              $.getJSON(api.videoInfo.replace(&#x27;{videoId}&#x27;, videoId)).done(function(
                                jsonObj
                              ) {
                                if (jsonObj.items.length &gt; 0) {
                                  jsonObj.formattedTime = formatVideoDuration(
                                    jsonObj.items[0].contentDetails.duration
                                  );
                                }
                        
                                videoData = jsonObj;
                                myEvents.publish(&#x27;videoDataReady&#x27;);
                              });
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Called on a widget instance if the Youtube API is unavailable/blocked by ISP, country, Gov&#x27;t, etc.
                        			&lt;br&gt;This looks for the Kaltura fallback video ID attribute, and if it exists it changes the widget to a Kaltura
                        			video player and inits the KT video player widget.
                        
                        			@method Player.fallbackToKaltura
                        			@private
                        		**/
                            function fallbackToKaltura() {
                              var fallbackid = appliedSettings.$origEl.data(&#x27;kalturaFallbackid&#x27;);
                        
                              if (fallbackid &amp;&amp; fallbackid !== &#x27;&#x27;) {
                                IBM.common.util.debug.add(
                                  &#x27;log&#x27;,
                                  &#x27;Switching &#x27; +
                                    appliedSettings.$origEl +
                                    &#x27; to Kaltura fallback ID &#x27; +
                                    fallbackid
                                );
                                appliedSettings.$origEl
                                  .data({
                                    videotype: &#x27;kaltura&#x27;,
                                    videoid: fallbackid,
                                  })
                                  .videoplayer();
                              }
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Called on player state change, if new state is &quot;play&quot;.
                        			&lt;br&gt;Finds any active widgets that aren&#x27;t this one and automatically pauses them when a new one is played.
                        
                        			@method Player.pauseOtherVideos
                        			@private
                        		**/
                            function pauseOtherVideos() {
                              $(&quot;.ibm-widget-processed[data-widget=&#x27;videoplayer&#x27;]&quot;).each(function() {
                                if (this !== appliedSettings.$origEl[0]) {
                                  try {
                                    $(this)
                                      .data(&#x27;widget&#x27;)
                                      .pauseVideo();
                                    // eslint-disable-next-line no-empty
                                  } catch (ignore) {}
                                }
                              });
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;Called onclick of the user&#x27;s link, or the auto-generated image that serves as the overlay trigger.
                        			&lt;br /&gt;Public method to use to programatically open and play the associated video. Or you can just do: $(&quot;myTrigger a&quot;).click();
                        
                        			@method Player.showOverlayAndPlay
                        		**/
                            me.showOverlayAndPlay = showOverlayAndPlay;
                            function showOverlayAndPlay() {
                              // Open the overlay for this player object instance.
                              me.overlay.show();
                        
                              // If the overlay still has our TMP DIV, it means we haven&#x27;t embedded the player yet, so embed it,
                              // Else if there&#x27;s no TMP DIV, it means the video is there, so just play it.
                              // NOTE: HAVE to include &quot;div&quot; in the selector b/c YT copies the ID to the embedded iframe.
                              if ($(&#x27;div#&#x27; + appliedSettings.id + &#x27;-tmpcon&#x27;)[0]) {
                                //appliedPlayerVars.autoplay = 1;
                                embedVideo(
                                  $(&#x27;div#&#x27; + appliedSettings.id + &#x27;-tmpcon&#x27;),
                                  appliedSettings.videoid
                                );
                              } else {
                                setTimeout(function() {
                                  me.player.playVideo();
                                }, 600);
                              }
                            }
                        
                            /**
                        			This is a method of the &quot;Player&quot; constructor.
                        			&lt;br&gt;This is our YT player factory.
                        			&lt;br /&gt;Called by init(). This is like our sub-factory.
                        			&lt;br /&gt;Based on the display type, it calls the proper functions to make the proper widget elements for that type.
                        			&lt;br /&gt;This is ONLY called after KT API is loaded, so assume all kWidget APIs are available.
                        
                        			@method Player.setupPlayerWidget
                        			@private
                        		**/
                            function setupPlayerWidget() {
                              var playerType = appliedSettings.videodisplay;
                        
                              if (playerType.indexOf(&#x27;carousel-&#x27;) === 0) {
                                playerType = &#x27;carousel&#x27;;
                              }
                        
                              appliedSettings.$origEl.addClass(&#x27;ibm-video-player-con&#x27;);
                        
                              switch (playerType) {
                                case &#x27;inline&#x27;:
                                  // We inject an inline player inside the element that initiated the plug-in.
                        
                                  // Call API to get video info. Stores locally and fires event for reuse.
                                  getVideoInfo(appliedSettings.videoid);
                        
                                  // Create a video player trigger (placeholder image), used on both inline and overlayAndTrigger displays.
                                  createPlayerTrigger(appliedSettings.videoid);
                        
                                  // Inject the placeholder INSIDE this element that&#x27;s inside the orig container element.
                                  // The YT player object REPLACES this.
                                  $(&#x27;&lt;div&gt;&lt;/div&gt;&#x27;)
                                    .appendTo(appliedSettings.$origEl.empty())
                                    .html(me.$trigger);
                        
                                  // Add placeholder/trigger video info.
                                  addPlaceholderInfo();
                        
                                  // Find any parent setsameheight widget that was ALREADY PROCESSED and recalculate the heights because we
                                  //  just injected some new HTML that changed the height.
                                  if (
                                    appliedSettings.$origEl.closest(
                                      &quot;.ibm-widget-processed[data-widget=&#x27;setsameheight&#x27;]&quot;
                                    )[0]
                                  ) {
                                    appliedSettings.$origEl
                                      .closest(&quot;.ibm-widget-processed[data-widget=&#x27;setsameheight&#x27;]&quot;)
                                      .data(&#x27;widget&#x27;)
                                      .adjustHeights(true);
                                  }
                        
                                  // Add Aria label.
                                  myEvents
                                    .subscribe(&#x27;videoDataReady&#x27;, &#x27;videoplayer&#x27;, function() {
                                      addAriaLabel(me.$trigger);
                                    })
                                    .runAsap(function() {
                                      addAriaLabel(me.$trigger);
                                    });
                        
                                  // Bind the trigger to REPLACE the original element (containers the trigger) with an embeded video player.
                                  me.$trigger.click(function(evt) {
                                    evt.preventDefault();
                        
                                    createInlinePlayer(
                                      appliedSettings.$origEl.children(&#x27;div&#x27;),
                                      appliedSettings.videoid
                                    );
                        
                                    // On resize, recalculate height and reset iframe@height value. Makes the player responsive and adjust height
                                    //  of iframe based on width of any container it&#x27;s in, when the container changes width.
                                    $(window).on(&#x27;resize&#x27;, function() {
                                      var $playerIframe = $(me.player.getIframe()),
                                        newHeight = calcHeight($playerIframe.parent().width());
                        
                                      $playerIframe.attr(&#x27;height&#x27;, newHeight + &#x27;px&#x27;);
                                    });
                        
                                    // Add processed state (class) and fire common init event on the HTML element.
                                    IBM.common.widget.manager.dispatchInitEvent(
                                      appliedSettings.$origEl[0]
                                    );
                                  });
                        
                                  if (appliedSettings.autoplay) {
                                    me.$trigger.trigger(&#x27;click&#x27;);
                                  }
                        
                                  break;
                        
                                case &#x27;overlay&#x27;:
                                  // We make ONLY the overlay here.
                                  // The trigger is the element they put the widget on. It has to be on the link.
                        
                                  // Call API to get video info. Stores locally and fires event for reuse.
                                  getVideoInfo(appliedSettings.videoid);
                        
                                  // Set the overlay and video embed width/heigt from the preset used.
                                  setOverlayPresets();
                        
                                  // Get the video&#x27;s info and append the duration of the video to the trigger link if they set the option.
                                  if (appliedSettings.showvideoduration) {
                                    myEvents.subscribe(&#x27;videoDataReady&#x27;, &#x27;videoplayer&#x27;, function() {
                                      if (appliedSettings.videodurationcolor !== &#x27;none&#x27;) {
                                        appliedSettings.$origEl.append(
                                          &#x27; &lt;span class=&quot;ibm-item-note&quot;&gt;(&#x27; +
                                            videoData.formattedTime +
                                            &#x27;)&lt;/span&gt;&#x27;
                                        );
                                      } else {
                                        appliedSettings.$origEl.append(
                                          &#x27; (&#x27; + videoData.formattedTime + &#x27;)&#x27;
                                        );
                                      }
                                    });
                                  }
                        
                                  // Make overlay and attach to this object.
                                  me.overlay = ibmVp.createOverlay(appliedSettings);
                                  me.overlay.setHtml(
                                    &#x27;&lt;div id=&quot;&#x27; + appliedSettings.id + &#x27;-tmpcon&quot;&gt;&lt;/div&gt;&#x27;
                                  );
                        
                                  // Bind the video to pause if the overlay is closed.
                                  me.overlay.subscribe(&#x27;hide&#x27;, &#x27;Videoplayer&#x27;, function() {
                                    me.player.pauseVideo();
                                  });
                        
                                  // If they explicitely said to show the play button on their implied custom trigger (use userSettings),
                                  //  add the play button class and span.
                                  if (userSettings.showimageplaybutton) {
                                    appliedSettings.$origEl.addClass(playerPlaceholderClass);
                                    addPlaybutton(appliedSettings.$origEl);
                                  }
                        
                                  // Change the width to the preset overlay player widget, instead of the width of the container on the page.
                                  appliedSettings.width = appliedSettings.overlayplayerwidth;
                        
                                  // Add Aria label.
                                  myEvents
                                    .subscribe(&#x27;videoDataReady&#x27;, &#x27;videoplayer&#x27;, function() {
                                      addAriaLabel(
                                        appliedSettings.$origEl,
                                        appliedSettings.$origEl.text()
                                      );
                                    })
                                    .runAsap(function() {
                                      addAriaLabel(
                                        appliedSettings.$origEl,
                                        appliedSettings.$origEl.text()
                                      );
                                    });
                        
                                  // Bind the element (usually an &lt;a&gt; but can technically be anything) that was init via the plugin to open overlay.
                                  appliedSettings.$origEl.click(function(evt) {
                                    evt.preventDefault();
                                    showOverlayAndPlay();
                        
                                    // Add processed state (class) and fire common init event on the HTML element.
                                    IBM.common.widget.manager.dispatchInitEvent(
                                      appliedSettings.$origEl[0]
                                    );
                                  });
                        
                                  break;
                        
                                case &#x27;overlayandtrigger&#x27;:
                                  // We make both the overlay AND the trigger (image they click on to launch the overlay).
                        
                                  // Call API to get video info. Stores locally and fires event for reuse.
                                  getVideoInfo(appliedSettings.videoid);
                        
                                  // Set the overlay and video embed width/heigt from the preset used.
                                  setOverlayPresets();
                        
                                  // Create a video player trigger (placeholder image), used on both inline and overlayAndTrigger displays.
                                  createPlayerTrigger(appliedSettings.videoid);
                        
                                  // Inject the trigger INSIDE the element that init&#x27;d the plug-in.
                                  $(&#x27;&lt;div&gt;&lt;/div&gt;&#x27;)
                                    .appendTo(appliedSettings.$origEl.empty())
                                    .html(me.$trigger);
                        
                                  // Add placeholder/trigger video info.
                                  addPlaceholderInfo();
                        
                                  // Find any parent setsameheight widget that was ALREADY PROCESSED and recalculate the heights because we
                                  //  just injected some new HTML that changed the height.
                                  if (
                                    appliedSettings.$origEl.closest(
                                      &quot;.ibm-widget-processed[data-widget=&#x27;setsameheight&#x27;]&quot;
                                    )[0]
                                  ) {
                                    appliedSettings.$origEl
                                      .closest(&quot;.ibm-widget-processed[data-widget=&#x27;setsameheight&#x27;]&quot;)
                                      .data(&#x27;widget&#x27;)
                                      .adjustHeights(true);
                                  }
                        
                                  // Make overlay and attach to this object.
                                  me.overlay = ibmVp.createOverlay(appliedSettings);
                                  me.overlay.setHtml(
                                    &#x27;&lt;div id=&quot;&#x27; + appliedSettings.id + &#x27;-tmpcon&quot;&gt;&lt;/div&gt;&#x27;
                                  );
                        
                                  // Bind the video to pause if the overlay is closed.
                                  me.overlay.subscribe(&#x27;hide&#x27;, &#x27;Videoplayer&#x27;, function() {
                                    me.player.pauseVideo();
                                  });
                        
                                  // Change the width to the preset overlay player widget, instead of the width of the container on the page.
                                  // NOTE: This HAS to be after we create the trigger, else the trigger will use this width and automatically make a big play button.
                                  appliedSettings.width = appliedSettings.overlayplayerwidth;
                        
                                  // Add Aria label.
                                  myEvents
                                    .subscribe(&#x27;videoDataReady&#x27;, &#x27;videoplayer&#x27;, function() {
                                      addAriaLabel(me.$trigger);
                                    })
                                    .runAsap(function() {
                                      addAriaLabel(me.$trigger);
                                    });
                        
                                  // Bind trigger -&gt; open overlay and play.. dupe what overlay above does just on a different element.
                                  me.$trigger.click(function(evt) {
                                    evt.preventDefault();
                                    showOverlayAndPlay();
                        
                                    // Add processed state (class) and fire common init event on the HTML element.
                                    IBM.common.widget.manager.dispatchInitEvent(
                                      appliedSettings.$origEl[0]
                                    );
                                  });
                        
                                  break;
                        
                                case &#x27;carousel&#x27;:
                                  // This creates a div element in a carousel for each video ID.
                                  // Used for both types of carouse. The only differnece is the videodisplay, and it is
                                  //   determined using the passed appliedSettings in the ibmVp.createVideoCarousel function.
                                  // Then it inits the videoplayer plug-in on each.
                                  // Then it inits the carousel.
                        
                                  // It&#x27;s just as if the dev custom coded the elements themselves, then say &quot;displaytype=overlaywithtrigger&quot;.
                                  if (appliedSettings.videoplaylistid !== &#x27;&#x27;) {
                                    // Get video info from videoinfo API using CSV of IDs.
                                    $.getJSON(
                                      api.playlistVideos
                                        .replace(&#x27;{playlistId}&#x27;, appliedSettings.videoplaylistid)
                                        .replace(&#x27;{maxResults}&#x27;, appliedSettings.maxnumvideos)
                                    ).done(function(jsonObj) {
                                      var videoIds = &#x27;&#x27;;
                        
                                      $.each(jsonObj.items, function() {
                                        videoIds += &#x27;,&#x27; + this.contentDetails.videoId;
                                      });
                        
                                      videoIds = videoIds.substring(1);
                        
                                      // Take CSV of video IDs and generate placeholder divs in a carousel, then init both.
                                      ibmVp.createVideoCarousel(videoIds, appliedSettings);
                                    });
                                  } else if (appliedSettings.videoid.indexOf(&#x27;,&#x27;) &gt; -1) {
                                    // Take CSV of video IDs and generate placeholder divs in a carousel, then init both.
                                    ibmVp.createVideoCarousel(appliedSettings.videoid, appliedSettings);
                                  }
                        
                                  break;
                        
                                default:
                                  IBM.common.util.debug.add(&#x27;log&#x27;, [
                                    &#x27;Video player display type unknown: &#x27;,
                                    appliedSettings.$origEl,
                                  ]);
                              }
                            }
                        
                            // Map common player actions to an abstracted API for cross-player ease of use.
                            // Safety check to make sure the lower level function is there before calling it.
                            me.playVideo = function() {
                              if (me.player.playVideo) {
                                me.player.playVideo();
                              }
                            };
                        
                            me.playVideoAt = function(timesec) {
                              if (me.player.playVideo) {
                                me.player.seekTo(timesec);
                                me.player.playVideo();
                              }
                            };
                        
                            me.pauseVideo = function() {
                              if (me.player.pauseVideo) {
                                me.player.pauseVideo();
                              }
                            };
                        
                            me.stopVideo = function() {
                              if (me.player.stopVideo) {
                                me.player.stopVideo();
                              }
                            };
                          };
                        })(jQuery, IBMCore);
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
